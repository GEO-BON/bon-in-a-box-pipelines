script: fitBRT.jl
name: BRT
description: "This script creates a Species Distribution Model (SDM) and uncertainty map based on using Boosted Regression Trees (BRTs) using the package SpeciesDistributionToolkit.jl and EvoTrees.jl"
author:
  - name: Michael D. Catchen
    identifier: https://orcid.org/0000-0002-6506-6487
inputs:
  occurrence:
    label: occurrence coordinate dataframe
    description: Dataframe, presence data.
    type: text/tab-separated-values
    example: "/output/data/getObservations/9f7d1cc148464cd0517e01c67af0ab5b/obs_data.tsv"
  predictors:
    label: geotiff predictor paths
    description: paths to geotiff
    type: image/tiff;application=geotiff[]
    example: "/output/foo/bar"
  bbox_crs:
    label: Bounding box and CRS
    description: Object containing the chosen bounding box and CRS.
    type: bboxCRS
    example:
  water_mask:
    label: water mask
    description: landcover layer containing open water pixels
    type: image/tiff;application=geotiff[]
    example: "/output/foo/bar"
  water_value:
    label: value for water in mask
    description: value used to represent water in the water mask
    type: int
    example: 210
  terrestrial:
    label: is terrestrial species
    description: boolean flag if the species are terrestrial
    type: boolean
    example: true
  max_candidate_pseudoabsences:
    label: maximum candidate pseudoabsences
    description: Maximum number of candidate pseudoabsences. A larger pool of candidate points increases the chance of 
      selecting ecologically meaningful absences, but beyond a certain threshold it offers diminishing returns and may 
      introduce bias if it oversamples areas far outside the speciesâ€™ accessible range. The ideal number is typically 
      guided by study extent, environmental heterogeneity, and species ecology, and can be fine-tuned by testing different 
      values to identify a level that supports stable model performance without inflating computation or noise.
    type: int
    example: 100000
  num_folds:
    label: number of crossvalidation folds
    description: Number of folds to use for k-fold crossvalidation. Increasing the number of folds in cross-validation 
      for a species distribution model generally provides a more reliable estimate of model performance by reducing variance, 
      but it also increases computational cost
    type: int
    example: 4
  pseudoabsence_buffer:
    label: pseudoabsence buffer
    description: Minimum distance to a presence in kilometers. Choose a pseudoabsence buffer that is large enough 
      to avoid placing absences in areas the species is likely to occupy, but not so large that it removes important 
      environmental variation. The buffer distance should reflect species ecology, sampling bias, and the resolution of 
      environmental predictors, and can be refined by testing several distances to find one that yields stable, 
      interpretable model performance.
    type: float
    example: 10.0
  pa_proportion:
    label: Pseudoabsence proportion
    description: The number of pseudoabsences, given by the proportion of the total occurrences to use. Using more pseudoabsences can improve model discrimination by providing a stronger contrast with presence data, 
      but too many can overwhelm the presence signal or overweight poorly sampled areas.
    type: float
    example: 2.4
outputs:
  predicted_sdm:
    label: predicted sdm
    description: map of predicted occurrence probability
    type: image/tiff;application=geotiff
  sdm_uncertainty:
    label: sdm uncertainty
    description: map of relative uncertainty
    type: image/tiff;application=geotiff
  fit_stats:
    label: fit statistics
    description: JSON of model fit stats and threshold
    type: text/json
  range:
    label: range
    description: range map thresholded at todo
    type: image/tiff;application=geotiff
  pseudoabsences:
    label: pseudoabsences
    description: pseudoabsence coordinates
    type: text/tab-separated-values
  env_corners:
    label: env_corners
    description: location of presences and pseudoabsences in environment space
    type: image/jpg
