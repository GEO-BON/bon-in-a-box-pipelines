{
  "nodes": [
    {
      "id": "14",
      "type": "io",
      "position": {
        "x": 1783,
        "y": 328.5
      },
      "data": {
        "descriptionFile": "BII>BIIChange.yml"
      }
    },
    {
      "id": "15",
      "type": "output",
      "position": {
        "x": 2502.922667485678,
        "y": 472.85042144523356
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "io",
      "position": {
        "x": 1976,
        "y": 665.5
      },
      "data": {
        "descriptionFile": "zonal_statistics>zonal_stats.yml"
      }
    },
    {
      "id": "53",
      "type": "io",
      "position": {
        "x": 476.0826023635467,
        "y": 579.650570473584
      },
      "data": {
        "descriptionFile": "data>getCountryPolygon.yml"
      }
    },
    {
      "id": "55",
      "type": "output",
      "position": {
        "x": 1020.3326899653318,
        "y": 691.9635745429575
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "56",
      "type": "io",
      "position": {
        "x": 1368.7567325731761,
        "y": 392.45450800352006
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "57",
      "type": "constant",
      "position": {
        "x": 859.6500859313794,
        "y": 117.0631809998606
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "58",
      "type": "constant",
      "position": {
        "x": 875.6500859313794,
        "y": 227.0631809998606
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "bii_nhm"
        ]
      }
    },
    {
      "id": "59",
      "type": "constant",
      "position": {
        "x": 892.2622337466457,
        "y": 401.1329734474144
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "near",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    },
    {
      "id": "60",
      "type": "constant",
      "position": {
        "x": 845.2750201848235,
        "y": 437.51017104366395
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "61",
      "type": "output",
      "position": {
        "x": 1766.662872369557,
        "y": 184.38550443642754
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "63",
      "type": "userInput",
      "position": {
        "x": 750.0053287271539,
        "y": 275.5024869625019
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "64",
      "type": "userInput",
      "position": {
        "x": 651.6977672355612,
        "y": 342.47255291045855
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "66",
      "type": "constant",
      "position": {
        "x": 895.9533005549715,
        "y": 358.40573556140333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "P5Y"
      }
    },
    {
      "id": "67",
      "type": "userInput",
      "position": {
        "x": 14.560022958672334,
        "y": 407.2202294777127
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "bboxCRS"
      }
    }
  ],
  "edges": [
    {
      "source": "14",
      "sourceHandle": "bii_change",
      "target": "15",
      "targetHandle": null,
      "id": "reactflow__edge-14bii_change-15"
    },
    {
      "source": "53",
      "sourceHandle": "country_region_polygon",
      "target": "25",
      "targetHandle": "study_area_polygon",
      "id": "reactflow__edge-53country_region_polygon-25study_area_polygon"
    },
    {
      "source": "53",
      "sourceHandle": "region",
      "target": "55",
      "targetHandle": null,
      "id": "reactflow__edge-53region-55"
    },
    {
      "source": "53",
      "sourceHandle": "country",
      "target": "55",
      "targetHandle": null,
      "id": "reactflow__edge-53country-55"
    },
    {
      "source": "25",
      "sourceHandle": "zonal_stats",
      "target": "15",
      "targetHandle": null,
      "id": "reactflow__edge-25zonal_stats-15"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-57-56stac_url"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-58-56collections_items"
    },
    {
      "source": "53",
      "sourceHandle": "country_region_polygon",
      "target": "56",
      "targetHandle": "study_area",
      "id": "reactflow__edge-53country_region_polygon-56study_area"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "14",
      "targetHandle": "rasters",
      "id": "reactflow__edge-56rasters-14rasters"
    },
    {
      "source": "59",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "resampling",
      "id": "reactflow__edge-59-56resampling"
    },
    {
      "source": "60",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-60-56aggregation"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "25",
      "targetHandle": "rasters",
      "id": "reactflow__edge-56rasters-25rasters"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "61",
      "targetHandle": null,
      "id": "reactflow__edge-56rasters-61"
    },
    {
      "source": "63",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "t0",
      "id": "reactflow__edge-63-56t0"
    },
    {
      "source": "63",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "start_year",
      "id": "reactflow__edge-63-14start_year"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "t1",
      "id": "reactflow__edge-64-56t1"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "end_year",
      "id": "reactflow__edge-64-14end_year"
    },
    {
      "source": "66",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-66-56temporal_res"
    },
    {
      "source": "67",
      "sourceHandle": null,
      "target": "53",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-67-53bbox_crs"
    },
    {
      "source": "67",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-67-56bbox_crs"
    },
    {
      "source": "67",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-67-25bbox_crs"
    }
  ],
  "inputs": {
    "pipeline@67": {
      "label": "Bounding box and CRS",
      "description": "Select a country/region and a CRS to obtain the associated bounding box.",
      "type": "bboxCRS",
      "example": null,
      "weight": 0
    },
    "zonal_statistics>zonal_stats.yml@25|summary_statistic": {
      "description": "Summary statistic for layers",
      "label": "Summary statistic",
      "type": "options[]",
      "options": [
        "mean",
        "median",
        "sum",
        "min",
        "max",
        "stdev",
        "variance",
        "mode"
      ],
      "example": [
        "mean"
      ],
      "weight": 1
    },
    "data>loadFromStac.yml@56|spatial_res": {
      "description": "Integer, spatial resolution of the rasters in the same units as the coordinate reference system (meters for projected reference systems and degrees for reference systems in lat long).\nLeave blank to use the original spatial resolution of the layers. If left blank, CRS must be EPSG:4326.",
      "label": "Spatial resolution",
      "type": "float",
      "example": null,
      "weight": 2
    },
    "pipeline@63": {
      "label": "Start date",
      "description": "Start date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank if using all available dates.",
      "type": "text",
      "example": "2000",
      "weight": 3
    },
    "pipeline@64": {
      "label": "End date",
      "description": "End date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank if using all available dates.",
      "type": "text",
      "example": "2020",
      "weight": 4
    }
  },
  "outputs": {
    "data>getCountryPolygon.yml@53|country": {
      "description": "Name of country of interest",
      "label": "Country",
      "type": "text",
      "weight": 0
    },
    "data>getCountryPolygon.yml@53|region": {
      "description": "Name of state/province of interest",
      "label": "Region",
      "type": "text",
      "weight": 1
    },
    "zonal_statistics>zonal_stats.yml@25|zonal_stats": {
      "description": "Summary statistic over the polygon",
      "label": "Summary statistic",
      "type": "text/csv",
      "weight": 2
    },
    "BII>BIIChange.yml@14|bii_change": {
      "description": "Raster plot of change in BII. Higher numbers indicate greater BII loss.",
      "label": "Change in BII",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    },
    "data>loadFromStac.yml@56|rasters": {
      "description": "Output raster files in geotiff format.",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 4
    }
  },
  "metadata": {
    "name": "Biodiversity Intactness Index",
    "description": "## Introduction \nThe Biodiversity Intactness Index (BII) is a metric designed to assess the degree to which ecosystems are intact and functioning relative to their natural state. It measures the abundance and diversity of species in a given area compared to what would be expected in an undisturbed ecosystem. The BII accounts for various factors, including habitat loss, fragmentation, and degradation, providing a comprehensive view of biodiversity health. A higher BII value indicates a more intact ecosystem with greater species diversity and abundance, while a lower value suggests significant ecological disruption. The biodiversity intactness index is a complimentary indicator in the GBF. The BII was created by the Natural History Museum and uses their PREDICTS database, which aggregates data from studies comparing terrestrial biodiversity at sites experiencing varying levels of human pressure. The database is used to establish a reference state using the biodiversity patterns in habitats with minimal disturbance levels. Then, it assigns sensitivity scores to each species based on their vulnerability to human pressure. Intactness is calculated by comparing the observed species abundance in a given area to what is expected under reference conditions with low human impact. It currently contains over 3 million records from more than 26,000 sites across 94 countries, representing a diverse array of over 45,000 plant, invertebrate, and vertebrate species.\n## Uses \nThe Biodiversity Intactness Index is a complimentary indicator in the GBF. This pipeline can be used to calculate summary statistics and plot a time series of the 10km resolution BII layer for a given country or region. The BII is expressed as a percentage, with higher percentages being more intact.\n## Pipeline limitations \nThe pipeline does not model the Biodiversity Intactness Index from the data, it calculates summary statistics over the 10 x 10 km BII layer pre-calcuated by the Natural History Museum calculated global layer. Therefore, you cannot customize the model or input custom data and you cannot increase the resolution of the layer. Additionally, because BII is a modelled data layer, the values may be less accurate in areas where there is a lack of data. To learn more about the PREDICTS database, visit the [page on the Natural History Museum website](https://www.nhm.ac.uk/our-science/research/projects/predicts/science.html).\n## Before you start \nThere are no data or API keys required for this analysis. To view the global layer, go to our [STAC catalog](https://stac.geobon.org/viewer/bii_nhm/bii_nhm_10km_2020).",
    "author": [
      {
        "name": "Jory Griffith",
        "email": "jory.griffith@mcgill.ca",
        "identifier": "https://orcid.org/0000-0001-6020-6690",
        "role": "Pipeline development"
      },
      {
        "name": "Laetitia Tremblay",
        "email": "laetita.tremblay@mcgill.ca",
        "identifier": "https://www.linkedin.com/in/laetitia-tremblay-b0619b273/",
        "role": "Pipeline documentation"
      }
    ],
    "license": "CC BY-NC-SA",
    "references": [
      {
        "text": "De Palma et al. 2024",
        "doi": "https://doi.org/10.5519/k33reyb6"
      },
      {
        "text": "Newbold et al. 2016",
        "doi": "https://doi.org/10.1126/science.aaf2201"
      },
      {
        "text": "Bastion 2023",
        "doi": "https://doi.org/10.32614/CRAN.package.exactextractr"
      }
    ]
  }
}