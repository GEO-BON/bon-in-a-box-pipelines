{
  "nodes": [
    {
      "id": "14",
      "type": "io",
      "position": {
        "x": 1783,
        "y": 328.5
      },
      "data": {
        "descriptionFile": "BII>BIIChange.yml"
      }
    },
    {
      "id": "15",
      "type": "output",
      "position": {
        "x": 2502.922667485678,
        "y": 472.85042144523356
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "io",
      "position": {
        "x": 1976,
        "y": 665.5
      },
      "data": {
        "descriptionFile": "zonal_statistics>zonal_stats.yml"
      }
    },
    {
      "id": "31",
      "type": "userInput",
      "position": {
        "x": 12,
        "y": 363.75
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:6622"
      }
    },
    {
      "id": "52",
      "type": "io",
      "position": {
        "x": 854.3164129354765,
        "y": 615.6847349950567
      },
      "data": {
        "descriptionFile": "data>getBoundingBox.yml"
      }
    },
    {
      "id": "53",
      "type": "io",
      "position": {
        "x": 156.1660109824801,
        "y": 645.9747418574636
      },
      "data": {
        "descriptionFile": "data>getCountryPolygon.yml"
      }
    },
    {
      "id": "55",
      "type": "output",
      "position": {
        "x": 782.3326899653318,
        "y": 701.9635745429575
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "56",
      "type": "io",
      "position": {
        "x": 1357.0524670348445,
        "y": 310.5246492351982
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "57",
      "type": "constant",
      "position": {
        "x": 859.6500859313794,
        "y": 117.0631809998606
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "58",
      "type": "constant",
      "position": {
        "x": 875.6500859313794,
        "y": 227.0631809998606
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "bii_nhm"
        ]
      }
    },
    {
      "id": "59",
      "type": "constant",
      "position": {
        "x": 892.2622337466457,
        "y": 401.1329734474144
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "near",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    },
    {
      "id": "60",
      "type": "constant",
      "position": {
        "x": 845.2750201848235,
        "y": 437.51017104366395
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "61",
      "type": "output",
      "position": {
        "x": 1766.662872369557,
        "y": 184.38550443642754
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "63",
      "type": "userInput",
      "position": {
        "x": 750.0053287271539,
        "y": 275.5024869625019
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "64",
      "type": "userInput",
      "position": {
        "x": 651.6977672355612,
        "y": 342.47255291045855
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "66",
      "type": "constant",
      "position": {
        "x": 895.9533005549715,
        "y": 358.40573556140333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "P5Y"
      }
    }
  ],
  "edges": [
    {
      "source": "14",
      "sourceHandle": "bii_change",
      "target": "15",
      "targetHandle": null,
      "id": "reactflow__edge-14bii_change-15"
    },
    {
      "source": "31",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "crs",
      "id": "reactflow__edge-31-25crs"
    },
    {
      "source": "53",
      "sourceHandle": "country_region_polygon",
      "target": "25",
      "targetHandle": "study_area_polygon",
      "id": "reactflow__edge-53country_region_polygon-25study_area_polygon"
    },
    {
      "source": "53",
      "sourceHandle": "country_region_polygon",
      "target": "52",
      "targetHandle": "study_area_file",
      "id": "reactflow__edge-53country_region_polygon-52study_area_file"
    },
    {
      "source": "53",
      "sourceHandle": "region",
      "target": "55",
      "targetHandle": null,
      "id": "reactflow__edge-53region-55"
    },
    {
      "source": "31",
      "sourceHandle": null,
      "target": "53",
      "targetHandle": "crs",
      "id": "reactflow__edge-31-53crs"
    },
    {
      "source": "31",
      "sourceHandle": null,
      "target": "52",
      "targetHandle": "crs",
      "id": "reactflow__edge-31-52crs"
    },
    {
      "source": "52",
      "sourceHandle": "bbox",
      "target": "25",
      "targetHandle": "bbox",
      "id": "reactflow__edge-52bbox-25bbox"
    },
    {
      "source": "53",
      "sourceHandle": "country",
      "target": "55",
      "targetHandle": null,
      "id": "reactflow__edge-53country-55"
    },
    {
      "source": "25",
      "sourceHandle": "zonal_stats",
      "target": "15",
      "targetHandle": null,
      "id": "reactflow__edge-25zonal_stats-15"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-57-56stac_url"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-58-56collections_items"
    },
    {
      "source": "52",
      "sourceHandle": "bbox",
      "target": "56",
      "targetHandle": "bbox",
      "id": "reactflow__edge-52bbox-56bbox"
    },
    {
      "source": "53",
      "sourceHandle": "country_region_polygon",
      "target": "56",
      "targetHandle": "study_area",
      "id": "reactflow__edge-53country_region_polygon-56study_area"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "14",
      "targetHandle": "rasters",
      "id": "reactflow__edge-56rasters-14rasters"
    },
    {
      "source": "59",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "resampling",
      "id": "reactflow__edge-59-56resampling"
    },
    {
      "source": "60",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-60-56aggregation"
    },
    {
      "source": "31",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "crs",
      "id": "reactflow__edge-31-56crs"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "25",
      "targetHandle": "rasters",
      "id": "reactflow__edge-56rasters-25rasters"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "61",
      "targetHandle": null,
      "id": "reactflow__edge-56rasters-61"
    },
    {
      "source": "63",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "t0",
      "id": "reactflow__edge-63-56t0"
    },
    {
      "source": "63",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "start_year",
      "id": "reactflow__edge-63-14start_year"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "t1",
      "id": "reactflow__edge-64-56t1"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "end_year",
      "id": "reactflow__edge-64-14end_year"
    },
    {
      "source": "66",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-66-56temporal_res"
    }
  ],
  "inputs": {
    "data>getCountryPolygon.yml@53|country": {
      "description": "ISO3 country code for the country of interest. For a list of ISO3 country codes,\nlook [here](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).\n",
      "label": "ISO3 country code",
      "type": "text",
      "example": "CAN",
      "weight": 0
    },
    "data>getCountryPolygon.yml@53|region": {
      "description": "ISO 3166-2 code for province or region, see more [here](en.wikipedia.org/wiki/ISO_3166-2)",
      "label": "State/Province code",
      "type": "text",
      "example": "CA-QB",
      "weight": 1
    },
    "pipeline@31": {
      "label": "Coordinate reference system",
      "description": "The coordinate reference system of the country polygon, bounding box, and raster layers for the output. This must be a projected CRS (in meters).\n\nYou can search for EPSG codes by country [here](https://epsg.io/).\n\n*Leave blank if you want the bounding box to be in EPSG:4326.*\n",
      "type": "text",
      "example": "EPSG:6624",
      "weight": 2
    },
    "zonal_statistics>zonal_stats.yml@25|summary_statistic": {
      "description": "Summary statistic for layers",
      "label": "Summary statistic",
      "type": "options[]",
      "options": [
        "mean",
        "median",
        "sum",
        "min",
        "max",
        "stdev",
        "variance",
        "mode"
      ],
      "example": [
        "mean"
      ],
      "weight": 3
    },
    "data>loadFromStac.yml@56|spatial_res": {
      "description": "Integer, spatial resolution of the rasters in the same units as the coordinate reference system (meters for projected reference systems and degrees for reference systems in lat long).",
      "label": "Spatial resolution",
      "type": "float",
      "example": 1000,
      "weight": 4
    },
    "pipeline@63": {
      "label": "Start date",
      "description": "Start date for time series layers. Can be in the format YYYY or YYYY-MM-DD.",
      "type": "text",
      "example": "2000",
      "weight": 5
    },
    "pipeline@64": {
      "label": "End date",
      "description": "End date for time series layers. Can be in the format YYYY or YYYY-MM-DD.",
      "type": "text",
      "example": "2020",
      "weight": 6
    }
  },
  "outputs": {
    "data>getCountryPolygon.yml@53|country": {
      "description": "Name of country of interest",
      "label": "Country",
      "type": "text",
      "weight": 0
    },
    "data>getCountryPolygon.yml@53|region": {
      "description": "Name of state/province of interest",
      "label": "Region",
      "type": "text",
      "weight": 1
    },
    "zonal_statistics>zonal_stats.yml@25|zonal_stats": {
      "description": "Summary statistic over the polygon",
      "label": "Summary statistic",
      "type": "text/csv",
      "weight": 2
    },
    "BII>BIIChange.yml@14|bii_change": {
      "description": "Raster plot of change in BII. Higher numbers indicate greater BII loss.",
      "label": "Change in BII",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    },
    "data>loadFromStac.yml@56|rasters": {
      "description": "Output raster files in geotiff format.",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 4
    }
  },
  "metadata": {
    "name": "Biodiversity Intactness Index",
    "description": "This pipeline calculates zonal statistics of the biodiversity intactness index of a given country or region and change over time using the BII layers developed by the Natural History Museum.",
    "author": [
      {
        "name": "Jory Griffith",
        "email": "jory.griffith@mcgill.ca",
        "identifier": "https://orcid.org/0000-0001-6020-6690",
        "role": "Pipeline development"
      }
    ],
    "license": "CC-BY-NC-SA",
    "references": [
      {
        "text": "De Palma et al. 2024",
        "doi": "https://doi.org/10.5519/k33reyb6"
      },
      {
        "text": "Newbold et al. 2016",
        "doi": "https://doi.org/10.1126/science.aaf2201"
      },
      {
        "text": "Bastion 2023",
        "doi": "https://doi.org/10.32614/CRAN.package.exactextractr"
      }
    ]
  }
}