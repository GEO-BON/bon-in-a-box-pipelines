{
  "nodes": [
    {
      "id": "14",
      "type": "io",
      "position": {
        "x": 1783,
        "y": 328.5
      },
      "data": {
        "descriptionFile": "BII>BIIChange.yml"
      }
    },
    {
      "id": "15",
      "type": "output",
      "position": {
        "x": 2502.922667485678,
        "y": 472.85042144523356
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "io",
      "position": {
        "x": 1976,
        "y": 665.5
      },
      "data": {
        "descriptionFile": "zonal_statistics>zonal_stats.yml"
      }
    },
    {
      "id": "56",
      "type": "io",
      "position": {
        "x": 1368.7567325731761,
        "y": 392.45450800352006
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "57",
      "type": "constant",
      "position": {
        "x": 859.6500859313794,
        "y": 117.0631809998606
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "58",
      "type": "constant",
      "position": {
        "x": 875.6500859313794,
        "y": 227.0631809998606
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "bii_nhm"
        ]
      }
    },
    {
      "id": "59",
      "type": "constant",
      "position": {
        "x": 892.2622337466457,
        "y": 401.1329734474144
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "near",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    },
    {
      "id": "60",
      "type": "constant",
      "position": {
        "x": 845.2750201848235,
        "y": 437.51017104366395
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "61",
      "type": "output",
      "position": {
        "x": 1766.662872369557,
        "y": 184.38550443642754
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "63",
      "type": "userInput",
      "position": {
        "x": 750.0053287271539,
        "y": 275.5024869625019
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "64",
      "type": "userInput",
      "position": {
        "x": 651.6977672355612,
        "y": 342.47255291045855
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "66",
      "type": "constant",
      "position": {
        "x": 895.9533005549715,
        "y": 358.40573556140333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "P5Y"
      }
    },
    {
      "id": "67",
      "type": "userInput",
      "position": {
        "x": 14.560022958672334,
        "y": 407.2202294777127
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "bboxCRS"
      }
    },
    {
      "id": "68",
      "type": "io",
      "position": {
        "x": 824.4738874036411,
        "y": 585.8583779303075
      },
      "data": {
        "descriptionFile": "data>load_polygons.yml"
      }
    },
    {
      "id": "69",
      "type": "output",
      "position": {
        "x": 1255.0726458313782,
        "y": 661.3618300004938
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "70",
      "type": "constant",
      "position": {
        "x": 439.24193203584343,
        "y": 567.216164595444
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "Country or region",
        "options": [
          "Country or region",
          "WDPA",
          "EEZ"
        ]
      }
    },
    {
      "id": "71",
      "type": "constant",
      "position": {
        "x": 505.2173275744881,
        "y": 618.6769731155869
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 0
      }
    }
  ],
  "edges": [
    {
      "source": "14",
      "sourceHandle": "bii_change",
      "target": "15",
      "targetHandle": null,
      "id": "reactflow__edge-14bii_change-15"
    },
    {
      "source": "25",
      "sourceHandle": "zonal_stats",
      "target": "15",
      "targetHandle": null,
      "id": "reactflow__edge-25zonal_stats-15"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-57-56stac_url"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-58-56collections_items"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "14",
      "targetHandle": "rasters",
      "id": "reactflow__edge-56rasters-14rasters"
    },
    {
      "source": "59",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "resampling",
      "id": "reactflow__edge-59-56resampling"
    },
    {
      "source": "60",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-60-56aggregation"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "25",
      "targetHandle": "rasters",
      "id": "reactflow__edge-56rasters-25rasters"
    },
    {
      "source": "56",
      "sourceHandle": "rasters",
      "target": "61",
      "targetHandle": null,
      "id": "reactflow__edge-56rasters-61"
    },
    {
      "source": "63",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "t0",
      "id": "reactflow__edge-63-56t0"
    },
    {
      "source": "63",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "start_year",
      "id": "reactflow__edge-63-14start_year"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "t1",
      "id": "reactflow__edge-64-56t1"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "end_year",
      "id": "reactflow__edge-64-14end_year"
    },
    {
      "source": "66",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-66-56temporal_res"
    },
    {
      "source": "67",
      "sourceHandle": null,
      "target": "56",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-67-56bbox_crs"
    },
    {
      "source": "67",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-67-25bbox_crs"
    },
    {
      "source": "67",
      "sourceHandle": null,
      "target": "68",
      "targetHandle": "country_region_bbox",
      "id": "reactflow__edge-67-68country_region_bbox"
    },
    {
      "source": "68",
      "sourceHandle": "polygon",
      "target": "25",
      "targetHandle": "study_area_polygon",
      "id": "reactflow__edge-68polygon-25study_area_polygon"
    },
    {
      "source": "68",
      "sourceHandle": "polygon",
      "target": "56",
      "targetHandle": "study_area",
      "id": "reactflow__edge-68polygon-56study_area"
    },
    {
      "source": "68",
      "sourceHandle": "polygon",
      "target": "69",
      "targetHandle": null,
      "id": "reactflow__edge-68polygon-69"
    },
    {
      "source": "70",
      "sourceHandle": null,
      "target": "68",
      "targetHandle": "polygon_type",
      "id": "reactflow__edge-70-68polygon_type"
    },
    {
      "source": "71",
      "sourceHandle": null,
      "target": "68",
      "targetHandle": "buffer",
      "id": "reactflow__edge-71-68buffer"
    }
  ],
  "inputs": {
    "pipeline@67": {
      "label": "Bounding box and CRS",
      "description": "Select a country/region and a CRS to obtain the associated bounding box.",
      "type": "bboxCRS",
      "example": null,
      "weight": 0
    },
    "zonal_statistics>zonal_stats.yml@25|summary_statistic": {
      "description": "Summary statistic for layers",
      "label": "Summary statistic",
      "type": "options[]",
      "options": [
        "mean",
        "median",
        "sum",
        "min",
        "max",
        "stdev",
        "variance",
        "mode"
      ],
      "example": [
        "mean"
      ],
      "weight": 1
    },
    "data>loadFromStac.yml@56|spatial_res": {
      "description": "Integer, spatial resolution of the rasters in the same units as the coordinate reference system (meters for projected reference systems and degrees for reference systems in lat long). Leave blank to pull in the original spatial resolution of the layers.",
      "label": "Spatial resolution (optional)",
      "type": "float",
      "example": null,
      "weight": 2
    },
    "pipeline@63": {
      "label": "Start date (optional)",
      "description": "Start date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank to pull all layers in the time series.",
      "type": "text",
      "example": null,
      "weight": 3
    },
    "pipeline@64": {
      "label": "End date (optional)",
      "description": "End date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank to pull all layers in the time series.",
      "type": "text",
      "example": null,
      "weight": 4
    }
  },
  "outputs": {
    "zonal_statistics>zonal_stats.yml@25|zonal_stats": {
      "description": "Summary statistic over the polygon",
      "label": "Summary statistic",
      "type": "text/csv",
      "weight": 0
    },
    "BII>BIIChange.yml@14|bii_change": {
      "description": "Raster plot of change in BII. Higher numbers indicate greater BII loss.",
      "label": "Change in BII",
      "type": "image/tiff;application=geotiff[]",
      "weight": 1
    },
    "data>loadFromStac.yml@56|rasters": {
      "description": "Output raster files in geotiff format.",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 2
    },
    "data>load_polygons.yml@68|polygon": {
      "description": "Polygons of the country, WDPA, EEZs for the country or region of interest",
      "label": "Polygon",
      "type": "application/geopackage+sqlite3",
      "weight": 3
    }
  },
  "metadata": {
    "name": "Biodiversity Intactness Index",
    "description": "This pipeline calculates zonal statistics of the biodiversity intactness index of a given country or region and change over time using the BII layers developed by the Natural History Museum.",
    "author": [
      {
        "name": "Jory Griffith",
        "email": "jory.griffith@mcgill.ca",
        "identifier": "https://orcid.org/0000-0001-6020-6690",
        "role": "Pipeline development"
      }
    ],
    "license": "CC BY-NC-SA",
    "references": [
      {
        "text": "De Palma et al. 2024",
        "doi": "https://doi.org/10.5519/k33reyb6"
      },
      {
        "text": "Newbold et al. 2016",
        "doi": "https://doi.org/10.1126/science.aaf2201"
      },
      {
        "text": "Bastion 2023",
        "doi": "https://doi.org/10.32614/CRAN.package.exactextractr"
      }
    ]
  }
}