{
  "nodes": [
    {
      "id": "13",
      "type": "constant",
      "position": {
        "x": 105,
        "y": 432.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float[]",
        "value": ["-86.748047", "33.72434", "-52.207031", "63.273182"]
      }
    },
    {
      "id": "14",
      "type": "userInput",
      "position": {
        "x": 132,
        "y": 397.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "chelsa-clim|bio1",
          "chelsa-clim|bio2",
          "chelsa-clim|bio3",
          "chelsa-clim|bio4",
          "chelsa-clim|bio5",
          "chelsa-clim|bio6",
          "chelsa-clim|bio7",
          "chelsa-clim|bio8",
          "chelsa-clim|bio9",
          "chelsa-clim|bio10",
          "chelsa-clim|bio11",
          "chelsa-clim|bio12",
          "chelsa-clim|bio13",
          "chelsa-clim|bio14",
          "chelsa-clim|bio15",
          "chelsa-clim|bio16",
          "chelsa-clim|bio17",
          "chelsa-clim|bio18",
          "chelsa-clim|bio19"
        ]
      }
    },
    {
      "id": "15",
      "type": "userInput",
      "position": {
        "x": 1141,
        "y": 300
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 5
      }
    },
    {
      "id": "16",
      "type": "userInput",
      "position": {
        "x": 1065,
        "y": 335
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float[]",
        "value": [0.3, 0.2, 0.4, 0.1]
      }
    },
    {
      "id": "17",
      "type": "userInput",
      "position": {
        "x": 174,
        "y": 210.83333333333331
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 2020
      }
    },
    {
      "id": "18",
      "type": "userInput",
      "position": {
        "x": 199,
        "y": 522.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": ["Acer saccharum", "Bubo scandiacus"]
      }
    },
    {
      "id": "19",
      "type": "userInput",
      "position": {
        "x": 165,
        "y": 117.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 50000
      }
    },
    {
      "id": "21",
      "type": "io",
      "position": {
        "x": 511,
        "y": 130
      },
      "data": {
        "descriptionFile": "SDM>BRT_julia_viewer.json"
      }
    },
    {
      "id": "22",
      "type": "userInput",
      "position": {
        "x": 177,
        "y": 557.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 2010
      }
    },
    {
      "id": "23",
      "type": "output",
      "position": {
        "x": 1400,
        "y": 12
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "24",
      "type": "output",
      "position": {
        "x": 1400,
        "y": 385
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "output",
      "position": {
        "x": 1400,
        "y": 61
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "26",
      "type": "io",
      "position": {
        "x": 1400,
        "y": 120
      },
      "data": {
        "descriptionFile": "Block3>block3.json"
      }
    },
    {
      "id": "27",
      "type": "constant",
      "position": {
        "x": 12,
        "y": 152.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "application/dbf",
        "value": null
      }
    },
    {
      "id": "28",
      "type": "output",
      "position": {
        "x": 1706,
        "y": 355.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "29",
      "type": "output",
      "position": {
        "x": 1731.4105363488807,
        "y": 148.5916669748139
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "30",
      "type": "output",
      "position": {
        "x": 1706,
        "y": 208.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "31",
      "type": "output",
      "position": {
        "x": 1706,
        "y": 90.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "32",
      "type": "output",
      "position": {
        "x": 1706,
        "y": 257.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "33",
      "type": "output",
      "position": {
        "x": 511,
        "y": 520
      },
      "data": {
        "label": "Output"
      }
    }
  ],
  "edges": [
    {
      "source": "19",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "SDM>julia_sdms>generateBackground.yml@22|buffer_distance",
      "id": "reactflow__edge-19-21SDM>julia_sdms>generateBackground.yml@22|buffer_distance"
    },
    {
      "source": "17",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "data>pyLoadObservations>pyLoadObservations.yml@1|max_year",
      "id": "reactflow__edge-17-21data>pyLoadObservations>pyLoadObservations.yml@1|max_year"
    },
    {
      "source": "18",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "pipeline@30",
      "id": "reactflow__edge-18-21pipeline@30"
    },
    {
      "source": "13",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "pipeline@3",
      "id": "reactflow__edge-13-21pipeline@3"
    },
    {
      "source": "22",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "data>pyLoadObservations>pyLoadObservations.yml@1|min_year",
      "id": "reactflow__edge-22-21data>pyLoadObservations>pyLoadObservations.yml@1|min_year"
    },
    {
      "source": "14",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "pipeline@32",
      "id": "reactflow__edge-14-21pipeline@32"
    },
    {
      "source": "21",
      "sourceHandle": "SDM>julia_sdms>fitBRT.yml@24|sdm",
      "target": "23",
      "targetHandle": null,
      "id": "reactflow__edge-21SDM>julia_sdms>fitBRT.yml@24|sdm-23"
    },
    {
      "source": "21",
      "sourceHandle": "filtering>cleanCoordinates.yml@21|clean_presence",
      "target": "24",
      "targetHandle": null,
      "id": "reactflow__edge-21filtering>cleanCoordinates.yml@21|clean_presence-24"
    },
    {
      "source": "21",
      "sourceHandle": "SDM>julia_sdms>fitBRT.yml@24|fit_stats",
      "target": "25",
      "targetHandle": null,
      "id": "reactflow__edge-21SDM>julia_sdms>fitBRT.yml@24|fit_stats-25"
    },
    {
      "source": "15",
      "sourceHandle": null,
      "target": "26",
      "targetHandle": "pipeline@43",
      "id": "reactflow__edge-15-26pipeline@43"
    },
    {
      "source": "16",
      "sourceHandle": null,
      "target": "26",
      "targetHandle": "Block3>weightLayers.yml@44|weights",
      "id": "reactflow__edge-16-26Block3>weightLayers.yml@44|weights"
    },
    {
      "source": "14",
      "sourceHandle": null,
      "target": "26",
      "targetHandle": "pipeline@6",
      "id": "reactflow__edge-14-26pipeline@6"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "data>loadFromStac.yml@18|mask",
      "id": "reactflow__edge-27-21data>loadFromStac.yml@18|mask"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "data>loadFromStac.yml@0|mask",
      "id": "reactflow__edge-27-21data>loadFromStac.yml@0|mask"
    },
    {
      "source": "26",
      "sourceHandle": "Block3>climateVelocity.yml@50|climate_velocity",
      "target": "28",
      "targetHandle": null,
      "id": "reactflow__edge-26Block3>climateVelocity.yml@50|climate_velocity-28"
    },
    {
      "source": "26",
      "sourceHandle": "data>loadFromStac.yml@9|rasters",
      "target": "29",
      "targetHandle": null,
      "id": "reactflow__edge-26data>loadFromStac.yml@9|rasters-29"
    },
    {
      "source": "26",
      "sourceHandle": "data>loadFromStac.yml@1|rasters",
      "target": "30",
      "targetHandle": null,
      "id": "reactflow__edge-26data>loadFromStac.yml@1|rasters-30"
    },
    {
      "source": "26",
      "sourceHandle": "Block3>climateUniqueness.yml@16|climate_uniqueness",
      "target": "31",
      "targetHandle": null,
      "id": "reactflow__edge-26Block3>climateUniqueness.yml@16|climate_uniqueness-31"
    },
    {
      "source": "26",
      "sourceHandle": "Block3>weightLayers.yml@44|priority_map",
      "target": "32",
      "targetHandle": null,
      "id": "reactflow__edge-26Block3>weightLayers.yml@44|priority_map-32"
    },
    {
      "source": "21",
      "sourceHandle": "SDM>julia_sdms>fitBRT.yml@24|sdm_uncertainty",
      "target": "26",
      "targetHandle": "Block3>weightLayers.yml@44|uncertainty",
      "id": "reactflow__edge-21SDM>julia_sdms>fitBRT.yml@24|sdm_uncertainty-26Block3>weightLayers.yml@44|uncertainty"
    },
    {
      "source": "18",
      "sourceHandle": null,
      "target": "33",
      "targetHandle": null,
      "id": "reactflow__edge-18-33"
    }
  ],
  "inputs": {
    "pipeline@14": {
      "label": "collections_items",
      "description": "Vector of strings, collection name followed by '|' followed by item id",
      "type": "text[]",
      "example": ["chelsa-clim|bio1", "chelsa-clim|bio2"]
    },
    "pipeline@15": {
      "label": "k",
      "description": "the value of k for the k-means algorithm",
      "type": "int",
      "example": 5
    },
    "pipeline@16": {
      "label": "weights",
      "description": "weight vector that sums to one. Weights correnspond to layers in this order, [uncertainty, uniqueness, velocity, accessability]",
      "type": "float[]",
      "example": [0.3, 0.2, 0.4, 0.1]
    },
    "pipeline@17": {
      "label": "maximum year",
      "description": "Max year observations wanted",
      "type": "int",
      "example": 2020
    },
    "pipeline@18": {
      "label": "Taxa list",
      "description": "Array of taxa values",
      "type": "text[]",
      "example": ["Acer saccharum", "Bubo scandiacus"]
    },
    "pipeline@19": {
      "label": "buffer_distance",
      "description": "the minimum distance between any presence and any pseudoabsence in meters",
      "type": "int",
      "example": 50000
    },
    "pipeline@22": {
      "label": "minimum year",
      "description": "Min year observations wanted",
      "type": "int",
      "example": 2010
    },
    "Block3>block3.json@26|pipeline@3": {
      "description": "Vector of float, bbox coordinates of the extent in the order xmin, ymin, xmax, ymax",
      "label": "bbox",
      "type": "float[]",
      "example": [-2316297, -1971146, 1015207, 1511916]
    }
  },
  "outputs": {
    "SDM>BRT_julia_viewer.json@21|SDM>julia_sdms>fitBRT.yml@24|sdm": {
      "description": "Map of predicted occurrence probability for selected species using Boosted Regression Trees",
      "label": "Predictions",
      "type": "image/tiff;application=geotiff",
      "weight": 5
    },
    "SDM>BRT_julia_viewer.json@21|filtering>cleanCoordinates.yml@21|clean_presence": {
      "description": "Dataframe, table with clean presence points from GBIF for selected species",
      "label": "Presences",
      "type": "text/tab-separated-values",
      "weight": 2
    },
    "SDM>BRT_julia_viewer.json@21|SDM>julia_sdms>fitBRT.yml@24|fit_stats": {
      "description": "Model fit statistics and threshold",
      "label": "Fit statistics",
      "type": "text/json",
      "weight": 8
    },
    "Block3>block3.json@26|Block3>climateVelocity.yml@50|climate_velocity": {
      "description": "Map where higher pixel values means the climatic conditions are changing faster at that place relative to pixels with lower values",
      "label": "climate velocity",
      "type": "image/tiff;application=geotiff",
      "weight": 9
    },
    "Block3>block3.json@26|data>loadFromStac.yml@9|rasters": {
      "description": "Land cover layer used for masking non-terrestrial habitats",
      "label": "Land cover",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    },
    "Block3>block3.json@26|data>loadFromStac.yml@1|rasters": {
      "description": "Environmental layers used as predictors in species distribution modeling",
      "label": "Predictors",
      "type": "image/tiff;application=geotiff[]",
      "weight": 4
    },
    "Block3>block3.json@26|Block3>climateUniqueness.yml@16|climate_uniqueness": {
      "description": "Map where higher pixel values means the climatic conditions are more unique/rare than lower value-pixels",
      "label": "climate uniqueness",
      "type": "image/tiff;application=geotiff",
      "weight": 10
    },
    "Block3>block3.json@26|Block3>weightLayers.yml@44|priority_map": {
      "description": "Sampling priority map based on weighting accessibility, climate uniqueness, climate velocity, and SDM uncertainty",
      "label": "priority map",
      "type": "image/tiff;application=geotiff",
      "weight": 10
    },
    "pipeline@18": {
      "label": "Species name",
      "description": "Species for which the sampling prioritization is calculated",
      "weight": 1
    },
    "SDM>BRT_julia_viewer.json@21|SDM>julia_sdms>fitBRT.yml@24|sdm_uncertainty": {
      "description": "Map of relative uncertainty of species distribution modeling predictions",
      "label": "Spatial uncertainty",
      "type": "image/tiff;application=geotiff",
      "weight": 6
    }
  },
  "metadata": {
    "name": "Sampling prioritization based on species distribution modeling",
    "description": "This is a pipeline that contains two pipelines, first to compute and SDM using BRTs, and second to take the SDM uncertainty and weigh it with accessibility, climate uniqueness, and climate velocity to produce a sampling priority map for a selected species.",
    "author": [
      {
        "name": "Michael D. Catchen"
      }
    ],
    "license": "MIT",
    "external_link": null
  }
}
