{
  "nodes": [
    {
      "id": "34",
      "type": "io",
      "position": {
        "x": 1940,
        "y": 163.5
      },
      "data": {
        "descriptionFile": "filtering>cleanCoordinates.yml"
      }
    },
    {
      "id": "35",
      "type": "constant",
      "position": {
        "x": 1507,
        "y": 193.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "equal",
          "zeros",
          "duplicates",
          "same_pixel",
          "capitals",
          "centroids",
          "gbif",
          "institutions"
        ]
      }
    },
    {
      "id": "40",
      "type": "io",
      "position": {
        "x": 2909,
        "y": 390.5
      },
      "data": {
        "descriptionFile": "SDM>selectBackground.yml"
      }
    },
    {
      "id": "44",
      "type": "io",
      "position": {
        "x": 3495,
        "y": 780
      },
      "data": {
        "descriptionFile": "SDM>setupDataSdm.yml"
      }
    },
    {
      "id": "45",
      "type": "constant",
      "position": {
        "x": 3033,
        "y": 801.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "bootstrap",
        "options": [
          "bootstrap",
          "crossvalidation",
          "none"
        ]
      }
    },
    {
      "id": "46",
      "type": "userInput",
      "position": {
        "x": 3150,
        "y": 932.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 2
      }
    },
    {
      "id": "47",
      "type": "constant",
      "position": {
        "x": 3057,
        "y": 848.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 0.7
      }
    },
    {
      "id": "48",
      "type": "constant",
      "position": {
        "x": 3071,
        "y": 890.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 5
      }
    },
    {
      "id": "64",
      "type": "constant",
      "position": {
        "x": 1512,
        "y": 304.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 0.8
      }
    },
    {
      "id": "97",
      "type": "io",
      "position": {
        "x": 1299,
        "y": 433
      },
      "data": {
        "descriptionFile": "SDM>removeCollinearity.yml"
      }
    },
    {
      "id": "98",
      "type": "constant",
      "position": {
        "x": 837,
        "y": 397.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "vif.cor",
        "options": [
          "vif.cor",
          "vif.step",
          "pearson",
          "spearman",
          "kendall"
        ]
      }
    },
    {
      "id": "99",
      "type": "constant",
      "position": {
        "x": 837,
        "y": 444.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "pearson",
        "options": [
          "pearson",
          "spearman",
          "kendall"
        ]
      }
    },
    {
      "id": "100",
      "type": "constant",
      "position": {
        "x": 875,
        "y": 491.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 5000
      }
    },
    {
      "id": "101",
      "type": "constant",
      "position": {
        "x": 861,
        "y": 533.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 0.75
      }
    },
    {
      "id": "102",
      "type": "constant",
      "position": {
        "x": 875,
        "y": 575.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 8
      }
    },
    {
      "id": "104",
      "type": "io",
      "position": {
        "x": 2424,
        "y": 326.5
      },
      "data": {
        "descriptionFile": "SDM>studyExtent.yml"
      }
    },
    {
      "id": "105",
      "type": "constant",
      "position": {
        "x": 1972,
        "y": 357.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "bbox",
        "options": [
          "box",
          "mcp",
          "buffer",
          "bbox"
        ]
      }
    },
    {
      "id": "107",
      "type": "constant",
      "position": {
        "x": 2010,
        "y": 451.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 0
      }
    },
    {
      "id": "116",
      "type": "constant",
      "position": {
        "x": 3665,
        "y": 978.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "lat_lon",
        "options": [
          "lat_lon",
          "lon_lat",
          "lon_lon",
          "lat_lat"
        ]
      }
    },
    {
      "id": "121",
      "type": "userInput",
      "position": {
        "x": 189,
        "y": 22.166666666666664
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "Acer saccharum"
        ]
      }
    },
    {
      "id": "122",
      "type": "output",
      "position": {
        "x": 514,
        "y": 12
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "124",
      "type": "output",
      "position": {
        "x": 1940,
        "y": 404.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "126",
      "type": "output",
      "position": {
        "x": 1299,
        "y": 136.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "128",
      "type": "userInput",
      "position": {
        "x": 118,
        "y": 846.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 1000
      }
    },
    {
      "id": "139",
      "type": "io",
      "position": {
        "x": 514,
        "y": 69
      },
      "data": {
        "descriptionFile": "data>getGBIFObservations>getGBIFObservations.yml"
      }
    },
    {
      "id": "140",
      "type": "io",
      "position": {
        "x": 826,
        "y": 617.5
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "142",
      "type": "constant",
      "position": {
        "x": 12,
        "y": 703.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "average",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    },
    {
      "id": "143",
      "type": "constant",
      "position": {
        "x": 12,
        "y": 750.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "144",
      "type": "output",
      "position": {
        "x": 1299,
        "y": 800.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "145",
      "type": "io",
      "position": {
        "x": 801,
        "y": 829
      },
      "data": {
        "descriptionFile": "data>GBIFHeatmapFromSTAC.yml"
      }
    },
    {
      "id": "146",
      "type": "constant",
      "position": {
        "x": 41,
        "y": 577.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "147",
      "type": "constant",
      "position": {
        "x": 41,
        "y": 619.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "148",
      "type": "constant",
      "position": {
        "x": 41,
        "y": 661.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "149",
      "type": "userInput",
      "position": {
        "x": 67,
        "y": 84.83333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "bboxCRS"
      }
    },
    {
      "id": "151",
      "type": "io",
      "position": {
        "x": 4137,
        "y": 960.6363636363636
      },
      "data": {
        "descriptionFile": "SDM>runewlgcp.yml"
      }
    },
    {
      "id": "152",
      "type": "output",
      "position": {
        "x": 4676,
        "y": 1054.7792207792206
      },
      "data": {
        "label": "Output"
      }
    }
  ],
  "edges": [
    {
      "source": "34",
      "sourceHandle": "clean_presence",
      "target": "40",
      "targetHandle": "presence",
      "id": "reactflow__edge-34clean_presence-40presence"
    },
    {
      "source": "34",
      "sourceHandle": "clean_presence",
      "target": "44",
      "targetHandle": "presence",
      "id": "reactflow__edge-34clean_presence-44presence"
    },
    {
      "source": "34",
      "sourceHandle": "clean_presence",
      "target": "104",
      "targetHandle": "presence",
      "id": "reactflow__edge-34clean_presence-104presence"
    },
    {
      "source": "40",
      "sourceHandle": "background",
      "target": "44",
      "targetHandle": "background",
      "id": "reactflow__edge-40background-44background"
    },
    {
      "source": "97",
      "sourceHandle": "rasters_selected",
      "target": "34",
      "targetHandle": "predictors",
      "id": "reactflow__edge-97rasters_selected-34predictors"
    },
    {
      "source": "98",
      "sourceHandle": null,
      "target": "97",
      "targetHandle": "method",
      "id": "reactflow__edge-98-97method"
    },
    {
      "source": "104",
      "sourceHandle": "study_extent",
      "target": "40",
      "targetHandle": "extent",
      "id": "reactflow__edge-104study_extent-40extent"
    },
    {
      "source": "35",
      "sourceHandle": null,
      "target": "34",
      "targetHandle": "tests",
      "id": "reactflow__edge-35-34tests"
    },
    {
      "source": "97",
      "sourceHandle": "rasters_selected",
      "target": "44",
      "targetHandle": "predictors",
      "id": "reactflow__edge-97rasters_selected-44predictors"
    },
    {
      "source": "99",
      "sourceHandle": null,
      "target": "97",
      "targetHandle": "method_cor_vif",
      "id": "reactflow__edge-99-97method_cor_vif"
    },
    {
      "source": "105",
      "sourceHandle": null,
      "target": "104",
      "targetHandle": "method",
      "id": "reactflow__edge-105-104method"
    },
    {
      "source": "45",
      "sourceHandle": null,
      "target": "44",
      "targetHandle": "partition_type",
      "id": "reactflow__edge-45-44partition_type"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "34",
      "targetHandle": "env_threshold",
      "id": "reactflow__edge-64-34env_threshold"
    },
    {
      "source": "100",
      "sourceHandle": null,
      "target": "97",
      "targetHandle": "nb_sample",
      "id": "reactflow__edge-100-97nb_sample"
    },
    {
      "source": "107",
      "sourceHandle": null,
      "target": "104",
      "targetHandle": "width_buffer",
      "id": "reactflow__edge-107-104width_buffer"
    },
    {
      "source": "46",
      "sourceHandle": null,
      "target": "44",
      "targetHandle": "runs_n",
      "id": "reactflow__edge-46-44runs_n"
    },
    {
      "source": "97",
      "sourceHandle": "rasters_selected",
      "target": "40",
      "targetHandle": "predictors",
      "id": "reactflow__edge-97rasters_selected-40predictors"
    },
    {
      "source": "101",
      "sourceHandle": null,
      "target": "97",
      "targetHandle": "cutoff_cor",
      "id": "reactflow__edge-101-97cutoff_cor"
    },
    {
      "source": "47",
      "sourceHandle": null,
      "target": "44",
      "targetHandle": "boot_proportion",
      "id": "reactflow__edge-47-44boot_proportion"
    },
    {
      "source": "102",
      "sourceHandle": null,
      "target": "97",
      "targetHandle": "cutoff_vif",
      "id": "reactflow__edge-102-97cutoff_vif"
    },
    {
      "source": "48",
      "sourceHandle": null,
      "target": "44",
      "targetHandle": "cv_partitions",
      "id": "reactflow__edge-48-44cv_partitions"
    },
    {
      "source": "121",
      "sourceHandle": null,
      "target": "122",
      "targetHandle": null,
      "id": "reactflow__edge-121-122"
    },
    {
      "source": "97",
      "sourceHandle": "rasters_selected",
      "target": "124",
      "targetHandle": null,
      "id": "reactflow__edge-97rasters_selected-124"
    },
    {
      "source": "121",
      "sourceHandle": null,
      "target": "139",
      "targetHandle": "taxa",
      "id": "reactflow__edge-121-139taxa"
    },
    {
      "source": "139",
      "sourceHandle": "observations_file",
      "target": "34",
      "targetHandle": "presence",
      "id": "reactflow__edge-139observations_file-34presence"
    },
    {
      "source": "139",
      "sourceHandle": "gbif_doi",
      "target": "126",
      "targetHandle": null,
      "id": "reactflow__edge-139gbif_doi-126"
    },
    {
      "source": "128",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-128-140spatial_res"
    },
    {
      "source": "142",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "resampling",
      "id": "reactflow__edge-142-140resampling"
    },
    {
      "source": "143",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-143-140aggregation"
    },
    {
      "source": "140",
      "sourceHandle": "rasters",
      "target": "97",
      "targetHandle": "rasters",
      "id": "reactflow__edge-140rasters-97rasters"
    },
    {
      "source": "140",
      "sourceHandle": "rasters",
      "target": "144",
      "targetHandle": null,
      "id": "reactflow__edge-140rasters-144"
    },
    {
      "source": "128",
      "sourceHandle": null,
      "target": "145",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-128-145spatial_res"
    },
    {
      "source": "145",
      "sourceHandle": "rasters",
      "target": "40",
      "targetHandle": "raster",
      "id": "reactflow__edge-145rasters-40raster"
    },
    {
      "source": "146",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "t0",
      "id": "reactflow__edge-146-140t0"
    },
    {
      "source": "147",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "t1",
      "id": "reactflow__edge-147-140t1"
    },
    {
      "source": "148",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-148-140temporal_res"
    },
    {
      "source": "149",
      "sourceHandle": null,
      "target": "139",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-149-139bbox_crs"
    },
    {
      "source": "149",
      "sourceHandle": null,
      "target": "145",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-149-145bbox_crs"
    },
    {
      "source": "149",
      "sourceHandle": null,
      "target": "140",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-149-140bbox_crs"
    },
    {
      "source": "149",
      "sourceHandle": null,
      "target": "104",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-149-104bbox_crs"
    },
    {
      "source": "151",
      "sourceHandle": "sdm_pred",
      "target": "152",
      "targetHandle": null,
      "id": "reactflow__edge-151sdm_pred-152"
    },
    {
      "source": "151",
      "sourceHandle": "sdm_unc",
      "target": "152",
      "targetHandle": null,
      "id": "reactflow__edge-151sdm_unc-152"
    },
    {
      "source": "151",
      "sourceHandle": "sdm_ci",
      "target": "152",
      "targetHandle": null,
      "id": "reactflow__edge-151sdm_ci-152"
    },
    {
      "source": "151",
      "sourceHandle": "sdm_obs",
      "target": "152",
      "targetHandle": null,
      "id": "reactflow__edge-151sdm_obs-152"
    },
    {
      "source": "151",
      "sourceHandle": "sdm_bg",
      "target": "152",
      "targetHandle": null,
      "id": "reactflow__edge-151sdm_bg-152"
    },
    {
      "source": "151",
      "sourceHandle": "sdm_dmesh",
      "target": "152",
      "targetHandle": null,
      "id": "reactflow__edge-151sdm_dmesh-152"
    },
    {
      "source": "44",
      "sourceHandle": "presence_background",
      "target": "151",
      "targetHandle": "presence_background",
      "id": "reactflow__edge-44presence_background-151presence_background"
    },
    {
      "source": "97",
      "sourceHandle": "rasters_selected",
      "target": "151",
      "targetHandle": "predictors",
      "id": "reactflow__edge-97rasters_selected-151predictors"
    },
    {
      "source": "116",
      "sourceHandle": null,
      "target": "151",
      "targetHandle": "orientation_block",
      "id": "reactflow__edge-116-151orientation_block"
    },
    {
      "source": "149",
      "sourceHandle": null,
      "target": "151",
      "targetHandle": "crs",
      "id": "reactflow__edge-149-151crs"
    },
    {
      "source": "46",
      "sourceHandle": null,
      "target": "151",
      "targetHandle": "n_folds",
      "id": "reactflow__edge-46-151n_folds"
    },
    {
      "source": "128",
      "sourceHandle": null,
      "target": "151",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-128-151spatial_res"
    }
  ],
  "inputs": {
    "pipeline@149": {
      "label": "Bounding and CRS",
      "description": "Select a bounding box and CRS",
      "type": "bboxCRS",
      "example": null,
      "weight": 0
    },
    "pipeline@121": {
      "label": "Taxa list",
      "description": "Array of taxa values",
      "type": "text[]",
      "example": [
        "Acer saccharum"
      ],
      "weight": 1
    },
    "SDM>selectBackground.yml@40|method_background": {
      "description": "Method used to sample background points",
      "label": "Method background",
      "type": "options",
      "options": [
        "random",
        "inclusion_buffer",
        "weighted_raster",
        "unweighted_raster"
      ],
      "example": "weighted_raster",
      "weight": 2
    },
    "SDM>selectBackground.yml@40|n_background": {
      "description": "Number of background points",
      "label": "Number of background points",
      "type": "int",
      "example": 100000,
      "weight": 3
    },
    "data>loadFromStac.yml@140|stac_url": {
      "description": "URL of the STAC catalog to pull predictor layers.",
      "label": "STAC URL",
      "type": "text",
      "example": "https://stac.geobon.org/",
      "weight": 4
    },
    "data>loadFromStac.yml@140|collections_items": {
      "description": "Collection name of STAC layers followed by '|' followed by item id",
      "label": "STAC collection items",
      "type": "text[]",
      "example": [
        "chelsa-clim|bio5",
        "earthenv_landcover|class_1",
        "earthenv_landcover|class_7",
        "earthenv_landcover|class_3"
      ],
      "weight": 5
    },
    "data>loadFromStac.yml@140|study_area": {
      "description": "Polygon of study area used to crop output layers",
      "label": "Study area",
      "type": "application/geopackage+sqlite3",
      "example": null,
      "weight": 6
    },
    "pipeline@46": {
      "label": "Number of blocks",
      "description": "Number of blocks (for crossvalidation method, currently ignored)",
      "type": "int",
      "example": 2,
      "weight": 7
    },
    "pipeline@128": {
      "label": "Spatial resolution",
      "description": "Integer, spatial resolution of the rasters",
      "type": "float",
      "example": 1000,
      "weight": 8
    },
    "data>getGBIFObservations>getGBIFObservations.yml@139|min_year": {
      "description": "Min year observations wanted",
      "label": "minimum year",
      "type": "int",
      "example": 2010,
      "weight": 9
    },
    "data>getGBIFObservations>getGBIFObservations.yml@139|max_year": {
      "description": "Max year observations wanted",
      "label": "maximum year",
      "type": "int",
      "example": 2024,
      "weight": 10
    },
    "data>GBIFHeatmapFromSTAC.yml@145|taxa": {
      "description": "taxonomic group for which to retrieve GBIF heatmap",
      "label": "Taxa",
      "type": "options",
      "options": [
        "reptiles",
        "plants",
        "mammals",
        "birds",
        "arthropods",
        "amphibians",
        "all"
      ],
      "example": "plants",
      "weight": 11
    }
  },
  "outputs": {
    "pipeline@121|default_output": {
      "label": "Species name",
      "description": "Species for which distribution is being modeled",
      "example": [
        "Acer saccharum"
      ],
      "type": "text[]",
      "weight": 0
    },
    "SDM>removeCollinearity.yml@97|rasters_selected": {
      "description": "Environmental layers used as predictors in species distribution modeling",
      "label": "Environmental predictors",
      "type": "image/tiff;application=geotiff[]",
      "weight": 1
    },
    "data>getGBIFObservations>getGBIFObservations.yml@139|gbif_doi": {
      "description": "DOI of GBIF download. Used for citing downloaded data.",
      "label": "DOI of GBIF download",
      "type": "text",
      "example": "10.15468/dl.j644h5",
      "weight": 2
    },
    "data>loadFromStac.yml@140|rasters": {
      "description": "array of output raster paths",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    },
    "SDM>runewlgcp.yml@151|sdm_pred": {
      "description": "model predictions while trained on the whole dataset",
      "label": "predictions",
      "type": "image/tiff;application=geotiff",
      "range": [
        0,
        1
      ],
      "weight": 4
    },
    "SDM>runewlgcp.yml@151|sdm_unc": {
      "description": "model uncertainty metrics",
      "label": "uncertainty",
      "type": "image/tiff;application=geotiff",
      "range": [
        0,
        1
      ],
      "weight": 5
    },
    "SDM>runewlgcp.yml@151|sdm_ci": {
      "description": "difference between the upper and the lower CI bound",
      "label": "CI range",
      "type": "image/tiff;application=geotiff[]",
      "range": [
        0,
        1
      ],
      "weight": 6
    },
    "SDM>runewlgcp.yml@151|sdm_obs": {
      "description": "GBIF observations used for the sdm model",
      "label": "observations",
      "type": "application/geo+json",
      "weight": 7
    },
    "SDM>runewlgcp.yml@151|sdm_bg": {
      "description": "background points used for the sdm model",
      "label": "background",
      "type": "application/geo+json",
      "weight": 8
    },
    "SDM>runewlgcp.yml@151|sdm_dmesh": {
      "description": "dual mesh used by the sdm model",
      "label": "dmesh",
      "type": "application/geo+json",
      "weight": 9
    }
  },
  "metadata": {
    "name": "Species distribution modeling with ewlgcpSDM",
    "description": "This pipeline generates predictions from a species distribution model  using a point process approach and the effort-weighted Log-Gaussian  Cox Process (ewlgcp) implemented in the R package [ewlgcpSDM](https://github.com/BiodiversiteQuebec/ewlgcpSDM).",
    "author": [
      {
        "name": "Fran√ßois Rousseu",
        "identifier": "https://orcid.org/0000-0002-2400-2479",
        "role": "Pipeline development"
      },
      {
        "name": "Guillaume Blanchet",
        "identifier": "https://orcid.org/0000-0001-5149-2488",
        "role": "Pipeline development"
      },
      {
        "name": "Dominique Gravel",
        "identifier": "https://orcid.org/0000-0002-4498-7076",
        "role": "Pipeline development"
      }
    ],
    "license": "MIT",
    "external_link": "https://github.com/GEO-BON/biab-2.0/blob/main/scripts/SDM/runewlgcp.R"
  }
}