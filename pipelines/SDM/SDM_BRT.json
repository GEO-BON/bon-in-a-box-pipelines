{
  "nodes": [
    {
      "id": "34",
      "type": "io",
      "position": {
        "x": 1182.9361440176413,
        "y": 321.9620685253946
      },
      "data": {
        "descriptionFile": "filtering>cleanCoordinates.yml"
      }
    },
    {
      "id": "35",
      "type": "constant",
      "position": {
        "x": 694,
        "y": 279.83333333333326
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "equal",
          "zeros",
          "duplicates",
          "same_pixel",
          "capitals",
          "centroids",
          "gbif",
          "institutions"
        ]
      }
    },
    {
      "id": "57",
      "type": "userInput",
      "position": {
        "x": -16,
        "y": 294.49999999999994
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:6623"
      }
    },
    {
      "id": "58",
      "type": "userInput",
      "position": {
        "x": 88,
        "y": 196.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float[]",
        "value": [
          -2316297,
          -1971146,
          1015207,
          1511916
        ]
      }
    },
    {
      "id": "64",
      "type": "constant",
      "position": {
        "x": 666,
        "y": 400.83333333333326
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 0.8
      }
    },
    {
      "id": "121",
      "type": "userInput",
      "position": {
        "x": 93,
        "y": 64.33333333333337
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "Acer saccharum"
        ]
      }
    },
    {
      "id": "123",
      "type": "output",
      "position": {
        "x": 1535,
        "y": 381.33333333333326
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "126",
      "type": "output",
      "position": {
        "x": 1323.3001942482933,
        "y": 83.45159639955898
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "128",
      "type": "userInput",
      "position": {
        "x": 28.09705606290231,
        "y": 557.7588988734078
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 1000
      }
    },
    {
      "id": "132",
      "type": "io",
      "position": {
        "x": 1565,
        "y": 631.3333333333333
      },
      "data": {
        "descriptionFile": "SDM>BRT>fitBRT.yml"
      }
    },
    {
      "id": "133",
      "type": "output",
      "position": {
        "x": 2028,
        "y": 662.8333333333333
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "134",
      "type": "output",
      "position": {
        "x": 2028,
        "y": 600.8333333333333
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "135",
      "type": "output",
      "position": {
        "x": 2030,
        "y": 527.8333333333333
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "137",
      "type": "userInput",
      "position": {
        "x": 21.61485380971783,
        "y": 447.3965396974388
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "chelsa-clim|bio1",
          "chelsa-clim|bio2"
        ]
      }
    },
    {
      "id": "141",
      "type": "output",
      "position": {
        "x": 2028,
        "y": 472.83333333333326
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "142",
      "type": "output",
      "position": {
        "x": 2030,
        "y": 831.8333333333333
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "143",
      "type": "output",
      "position": {
        "x": 2028,
        "y": 779.8333333333333
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "146",
      "type": "constant",
      "position": {
        "x": -59.99999999999994,
        "y": 481.26025544916456
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "148",
      "type": "output",
      "position": {
        "x": 2028,
        "y": 723.8333333333333
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "149",
      "type": "output",
      "position": {
        "x": 513,
        "y": 12
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "152",
      "type": "userInput",
      "position": {
        "x": 1206,
        "y": 775.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 10
      }
    },
    {
      "id": "153",
      "type": "userInput",
      "position": {
        "x": 1220,
        "y": 740.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 100000
      }
    },
    {
      "id": "154",
      "type": "userInput",
      "position": {
        "x": 1206,
        "y": 810.8333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 2.4
      }
    },
    {
      "id": "159",
      "type": "io",
      "position": {
        "x": 542.6786444321133,
        "y": 110.27536266231323
      },
      "data": {
        "descriptionFile": "data>getGBIFObservations>getGBIFObservations.yml"
      }
    },
    {
      "id": "160",
      "type": "io",
      "position": {
        "x": 445.3590725330655,
        "y": 533.8631584084096
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "161",
      "type": "io",
      "position": {
        "x": 475.4997120637047,
        "y": 745.2202912882263
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "162",
      "type": "output",
      "position": {
        "x": 996.3956315772633,
        "y": 528.5460837746845
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "163",
      "type": "constant",
      "position": {
        "x": -62.877394447579945,
        "y": 636.5226616924128
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "near",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    },
    {
      "id": "164",
      "type": "constant",
      "position": {
        "x": -104.66382148579396,
        "y": 697.4612011231416
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "166",
      "type": "constant",
      "position": {
        "x": -15.867664029589264,
        "y": 770.587448440016
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "esacci-lc|esacci-lc-2020"
        ]
      }
    },
    {
      "id": "167",
      "type": "userInput",
      "position": {
        "x": -261.0375061035156,
        "y": 588
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "application/geopackage+sqlite3"
      }
    },
    {
      "id": "169",
      "type": "constant",
      "position": {
        "x": 32.417229226464315,
        "y": 514.3360238228396
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "170",
      "type": "constant",
      "position": {
        "x": 40.33427669110165,
        "y": 572.3943718968469
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "171",
      "type": "constant",
      "position": {
        "x": 98.39262476510896,
        "y": 598.7845301123049
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "173",
      "type": "output",
      "position": {
        "x": 925.1980098346921,
        "y": 742.4831969284229
      },
      "data": {
        "label": "Output"
      }
    }
  ],
  "edges": [
    {
      "source": "35",
      "sourceHandle": null,
      "target": "34",
      "targetHandle": "tests",
      "id": "reactflow__edge-35-34tests"
    },
    {
      "source": "64",
      "sourceHandle": null,
      "target": "34",
      "targetHandle": "env_threshold",
      "id": "reactflow__edge-64-34env_threshold"
    },
    {
      "source": "34",
      "sourceHandle": "clean_presence",
      "target": "123",
      "targetHandle": null,
      "id": "reactflow__edge-34clean_presence-123"
    },
    {
      "source": "34",
      "sourceHandle": "clean_presence",
      "target": "132",
      "targetHandle": "occurrence",
      "id": "reactflow__edge-34clean_presence-132occurrence"
    },
    {
      "source": "132",
      "sourceHandle": "range",
      "target": "133",
      "targetHandle": null,
      "id": "reactflow__edge-132range-133"
    },
    {
      "source": "132",
      "sourceHandle": "fit_stats",
      "target": "134",
      "targetHandle": null,
      "id": "reactflow__edge-132fit_stats-134"
    },
    {
      "source": "132",
      "sourceHandle": "sdm_uncertainty",
      "target": "135",
      "targetHandle": null,
      "id": "reactflow__edge-132sdm_uncertainty-135"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "132",
      "targetHandle": "bbox",
      "id": "reactflow__edge-58-132bbox"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "132",
      "targetHandle": "crs",
      "id": "reactflow__edge-57-132crs"
    },
    {
      "source": "132",
      "sourceHandle": "predicted_sdm",
      "target": "141",
      "targetHandle": null,
      "id": "reactflow__edge-132predicted_sdm-141"
    },
    {
      "source": "132",
      "sourceHandle": "tuning",
      "target": "142",
      "targetHandle": null,
      "id": "reactflow__edge-132tuning-142"
    },
    {
      "source": "132",
      "sourceHandle": "env_corners",
      "target": "143",
      "targetHandle": null,
      "id": "reactflow__edge-132env_corners-143"
    },
    {
      "source": "132",
      "sourceHandle": "pseudoabsences",
      "target": "148",
      "targetHandle": null,
      "id": "reactflow__edge-132pseudoabsences-148"
    },
    {
      "source": "121",
      "sourceHandle": null,
      "target": "149",
      "targetHandle": null,
      "id": "reactflow__edge-121-149"
    },
    {
      "source": "152",
      "sourceHandle": null,
      "target": "132",
      "targetHandle": "pseudoabsence_buffer",
      "id": "reactflow__edge-152-132pseudoabsence_buffer"
    },
    {
      "source": "153",
      "sourceHandle": null,
      "target": "132",
      "targetHandle": "max_candidate_pseudoabsences",
      "id": "reactflow__edge-153-132max_candidate_pseudoabsences"
    },
    {
      "source": "154",
      "sourceHandle": null,
      "target": "132",
      "targetHandle": "pa_proportion",
      "id": "reactflow__edge-154-132pa_proportion"
    },
    {
      "source": "121",
      "sourceHandle": null,
      "target": "159",
      "targetHandle": "taxa",
      "id": "reactflow__edge-121-159taxa"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "159",
      "targetHandle": "proj",
      "id": "reactflow__edge-57-159proj"
    },
    {
      "source": "159",
      "sourceHandle": "gbif_doi",
      "target": "126",
      "targetHandle": null,
      "id": "reactflow__edge-159gbif_doi-126"
    },
    {
      "source": "159",
      "sourceHandle": "observations_file",
      "target": "34",
      "targetHandle": "presence",
      "id": "reactflow__edge-159observations_file-34presence"
    },
    {
      "source": "160",
      "sourceHandle": "rasters",
      "target": "34",
      "targetHandle": "predictors",
      "id": "reactflow__edge-160rasters-34predictors"
    },
    {
      "source": "160",
      "sourceHandle": "rasters",
      "target": "162",
      "targetHandle": null,
      "id": "reactflow__edge-160rasters-162"
    },
    {
      "source": "160",
      "sourceHandle": "rasters",
      "target": "132",
      "targetHandle": "predictors",
      "id": "reactflow__edge-160rasters-132predictors"
    },
    {
      "source": "161",
      "sourceHandle": "rasters",
      "target": "132",
      "targetHandle": "water_mask",
      "id": "reactflow__edge-161rasters-132water_mask"
    },
    {
      "source": "146",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-146-160stac_url"
    },
    {
      "source": "146",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-146-161stac_url"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "bbox",
      "id": "reactflow__edge-58-160bbox"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "bbox",
      "id": "reactflow__edge-58-161bbox"
    },
    {
      "source": "137",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-137-160collections_items"
    },
    {
      "source": "163",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "resampling",
      "id": "reactflow__edge-163-160resampling"
    },
    {
      "source": "164",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-164-160aggregation"
    },
    {
      "source": "128",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-128-160spatial_res"
    },
    {
      "source": "128",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-128-161spatial_res"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "crs",
      "id": "reactflow__edge-57-160crs"
    },
    {
      "source": "57",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "crs",
      "id": "reactflow__edge-57-161crs"
    },
    {
      "source": "166",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-166-161collections_items"
    },
    {
      "source": "164",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-164-161aggregation"
    },
    {
      "source": "163",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "resampling",
      "id": "reactflow__edge-163-161resampling"
    },
    {
      "source": "58",
      "sourceHandle": null,
      "target": "159",
      "targetHandle": "bbox",
      "id": "reactflow__edge-58-159bbox"
    },
    {
      "source": "167",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "study_area",
      "id": "reactflow__edge-167-160study_area"
    },
    {
      "source": "167",
      "sourceHandle": null,
      "target": "161",
      "targetHandle": "study_area",
      "id": "reactflow__edge-167-161study_area"
    },
    {
      "source": "169",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "t0",
      "id": "reactflow__edge-169-160t0"
    },
    {
      "source": "170",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "t1",
      "id": "reactflow__edge-170-160t1"
    },
    {
      "source": "171",
      "sourceHandle": null,
      "target": "160",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-171-160temporal_res"
    },
    {
      "source": "161",
      "sourceHandle": "rasters",
      "target": "173",
      "targetHandle": null,
      "id": "reactflow__edge-161rasters-173"
    }
  ],
  "inputs": {
    "pipeline@121": {
      "label": "Species",
      "description": "Name of species",
      "type": "text[]",
      "example": [
        "Acer saccharum"
      ],
      "weight": 0
    },
    "pipeline@137": {
      "label": "Environmental Predictors",
      "description": "Vector of strings, collection name followed by '|' followed by item id. View GEO BON STAC catalog items [here](https://stac.geobon.org/viewer/). The collection name and item name can be found in the URL (e.g. for \"https://stac.geobon.org/viewer/chelsa-clim/bio1\" the collection name is chelsa-clim and the item id is bio1). ",
      "type": "text[]",
      "example": [
        "chelsa-clim|bio1",
        "chelsa-clim|bio3",
        "chelsa-clim|bio4",
        "chelsa-clim|bio12",
        "chelsa-clim|bio15"
      ],
      "weight": 1
    },
    "data>getGBIFObservations>getGBIFObservations.yml@159|min_year": {
      "description": "Min year observations wanted",
      "label": "minimum year",
      "type": "int",
      "example": 2010,
      "weight": 2
    },
    "data>getGBIFObservations>getGBIFObservations.yml@159|max_year": {
      "description": "Max year observations wanted",
      "label": "maximum year",
      "type": "int",
      "example": 2024,
      "weight": 3
    },
    "pipeline@58": {
      "label": "Bounding Box",
      "description": "Vector of floating point numbers. Represent the bounding box in the order xmin, ymin, xmax, ymax. Must be in the same CRS as the CRS input.",
      "type": "float[]",
      "example": [
        "-8185951",
        "3491465",
        "-4435963",
        "6654068"
      ],
      "weight": 4
    },
    "pipeline@57": {
      "label": "Coordinate Reference System",
      "description": "String, Projection System as an EPSG code.",
      "type": "text",
      "example": "EPSG:8857",
      "weight": 5
    },
    "pipeline@128": {
      "label": "Spatial Resolution",
      "description": "Integer, spatial resolution of the rasters in the same units as the chosen coordinate reference system (meters or degrees)",
      "type": "float",
      "example": 1000,
      "weight": 6
    },
    "pipeline@152": {
      "label": "Pseudoabsence Buffer",
      "description": "The minimum distance a PA is allowed to be from a presence in kilometers",
      "type": "float",
      "example": 10,
      "weight": 7
    },
    "pipeline@153": {
      "label": "Max Candidate Pseudoabsences",
      "description": "The maximum number of candidate pseudoabsences to consider. This speeds up PA generation on large rasters.",
      "type": "int",
      "example": 100000,
      "weight": 8
    },
    "pipeline@154": {
      "label": "Pseudoabsence proportion",
      "description": "The number of PAs, given by the proportion of the total occurrences to use.",
      "type": "float",
      "example": 2.4,
      "weight": 9
    },
    "pipeline@167": {
      "label": "Study area",
      "description": "Polygon of study area used to crop output layers",
      "type": "application/geopackage+sqlite3",
      "example": null,
      "weight": 10
    },
    "data>loadFromStac.yml@161|t0": {
      "description": "Start date for time series layers in STAC catalog. Can be in the format YYYY or YYYY-MM-DD. For example, ESA landcover can be extracted by specifying the item name or specifying the whole collection and the start and end date here. Leave blank if extracting items by name.",
      "label": "Start date",
      "type": "text",
      "example": null,
      "weight": 11
    },
    "data>loadFromStac.yml@161|t1": {
      "description": "End date for time series layers. Can be in the format YYYY or YYYY-MM-DD. For example, ESA landcover can be extracted by specifying the item name or specifying the whole collection and the start and end date here. Leave blank if extracting items by name.",
      "label": "End date",
      "type": "text",
      "example": null,
      "weight": 12
    },
    "data>loadFromStac.yml@161|temporal_res": {
      "description": "Temporal resolution to use when querying STAC items by date, in the format (\"P\", time interval, and time unit, e.g. \"P1Y\" is yearly, \"P1M\" is montly, and \"P1D\" is daily). Leave blank if not querying by date. If the temporal resolution is coarser than the temporal resolution of the time series, the layers will be aggregated with the aggregation method chosen below.",
      "label": "Temporal resolution",
      "type": "text",
      "example": null,
      "weight": 13
    }
  },
  "outputs": {
    "pipeline@121|default_output": {
      "label": "Species",
      "description": "Name of species",
      "example": [
        "Acer saccharum"
      ],
      "type": "text[]",
      "weight": 0
    },
    "filtering>cleanCoordinates.yml@34|clean_presence": {
      "description": "Occurrences from GBIF after cleaning",
      "label": "Presences",
      "type": "text/tab-separated-values",
      "weight": 1
    },
    "SDM>BRT>fitBRT.yml@132|pseudoabsences": {
      "description": "pseudoabsence coordinates",
      "label": "Pseudoabsences",
      "type": "text/tab-separated-values",
      "weight": 2
    },
    "SDM>BRT>fitBRT.yml@132|env_corners": {
      "description": "Diagnostic plot of the location of presences (blue) and pseudoabsences (red) in environment space for up to the first 5 predictors.",
      "label": "Environment Space",
      "type": "image/jpg",
      "weight": 3
    },
    "SDM>BRT>fitBRT.yml@132|tuning": {
      "description": "Describes how the Matthew's Correlation Coefficient (MCC) changes as the threshold value changes from 0 to 1.",
      "label": "Tuning Curve",
      "type": "image/jpg",
      "weight": 4
    },
    "SDM>BRT>fitBRT.yml@132|fit_stats": {
      "description": "JSON of BRT fit statistics and optimal threshold value.",
      "label": "Fit Statistics",
      "type": "text/json",
      "weight": 5
    },
    "SDM>BRT>fitBRT.yml@132|predicted_sdm": {
      "description": "Map of occurrence score between 0 and 1.",
      "label": "Predicted SDM",
      "type": "image/tiff;application=geotiff",
      "weight": 6
    },
    "SDM>BRT>fitBRT.yml@132|range": {
      "description": "Range map thresholded at the optimal value.",
      "label": "Range",
      "type": "image/tiff;application=geotiff",
      "weight": 7
    },
    "SDM>BRT>fitBRT.yml@132|sdm_uncertainty": {
      "description": "Map of the BRT's relative uncertainty for each location.",
      "label": "SDM Uncertainty",
      "type": "image/tiff;application=geotiff",
      "weight": 8
    },
    "data>getGBIFObservations>getGBIFObservations.yml@159|gbif_doi": {
      "description": "DOI of GBIF download. Used for citing downloaded data.",
      "label": "DOI of GBIF download",
      "type": "text",
      "example": "10.15468/dl.j644h5",
      "weight": 9
    },
    "data>loadFromStac.yml@160|rasters": {
      "description": "array of output raster paths",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 10
    },
    "data>loadFromStac.yml@161|rasters": {
      "description": "Output raster files in geotiff format.",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 11
    }
  },
  "metadata": {
    "name": "Species distribution modeling with Boosted Regression Trees (BRTs)",
    "description": "This pipeline generates predictions for a species distribution model using the BRTs.",
    "author": [
      {
        "name": "Michael D. Catchen",
        "identifier": "https://orcid.org/0000-0002-6506-6487",
        "role": "Pipeline development"
      }
    ],
    "license": "MIT",
    "external_link": "https://github.com/GEO-BON/biab-2.0/blob/main/scripts/SDM/BRT"
  }
}