{
  "nodes": [
    {
      "id": "198",
      "type": "io",
      "position": {
        "x": 278.9624938964844,
        "y": 191.79999542236328
      },
      "data": {
        "descriptionFile": "getCountrybbox.json"
      }
    },
    {
      "id": "199",
      "type": "io",
      "position": {
        "x": 1023.9624938964844,
        "y": 175.79999542236328
      },
      "data": {
        "descriptionFile": "NDVI>calculateNDVI.yml"
      }
    },
    {
      "id": "200",
      "type": "output",
      "position": {
        "x": 891.9624938964844,
        "y": 520.7999954223633
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "201",
      "type": "output",
      "position": {
        "x": 927.9624938964844,
        "y": 425.7999954223633
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "202",
      "type": "output",
      "position": {
        "x": 1572.9624938964844,
        "y": 177.79999542236328
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "203",
      "type": "output",
      "position": {
        "x": 1558.9624938964844,
        "y": 189.79999542236328
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "204",
      "type": "output",
      "position": {
        "x": 1550.9624938964844,
        "y": 205.79999542236328
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "206",
      "type": "constant",
      "position": {
        "x": -155.73916625976562,
        "y": 197.39129638671875
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:4326"
      }
    }
  ],
  "edges": [
    {
      "source": "198",
      "sourceHandle": "data>getBoundingBox.yml@0|bbox",
      "target": "199",
      "targetHandle": "bounding_box",
      "id": "reactflow__edge-198data>getBoundingBox.yml@0|bbox-199bounding_box"
    },
    {
      "source": "198",
      "sourceHandle": "data>getCountryPolygon.yml@12|country_region_polygon",
      "target": "199",
      "targetHandle": "study_area_polygon",
      "id": "reactflow__edge-198data>getCountryPolygon.yml@12|country_region_polygon-199study_area_polygon"
    },
    {
      "source": "198",
      "sourceHandle": "data>getCountryPolygon.yml@12|country",
      "target": "200",
      "targetHandle": null,
      "id": "reactflow__edge-198data>getCountryPolygon.yml@12|country-200"
    },
    {
      "source": "198",
      "sourceHandle": "data>getCountryPolygon.yml@12|region",
      "target": "201",
      "targetHandle": null,
      "id": "reactflow__edge-198data>getCountryPolygon.yml@12|region-201"
    },
    {
      "source": "199",
      "sourceHandle": "rasters",
      "target": "202",
      "targetHandle": null,
      "id": "reactflow__edge-199rasters-202"
    },
    {
      "source": "199",
      "sourceHandle": "timeseries",
      "target": "203",
      "targetHandle": null,
      "id": "reactflow__edge-199timeseries-203"
    },
    {
      "source": "199",
      "sourceHandle": "timeseries_plot",
      "target": "204",
      "targetHandle": null,
      "id": "reactflow__edge-199timeseries_plot-204"
    },
    {
      "source": "206",
      "sourceHandle": null,
      "target": "198",
      "targetHandle": "pipeline@2",
      "id": "reactflow__edge-206-198pipeline@2"
    }
  ],
  "inputs": {
    "getCountrybbox.json@198|data>getCountryPolygon.yml@12|country": {
      "description": "ISO3 country code for the country of interest. For a list of ISO3 country codes,\nlook [here](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).\n",
      "label": "ISO3 country code",
      "type": "text",
      "example": "COL",
      "weight": 0
    },
    "getCountrybbox.json@198|data>getCountryPolygon.yml@12|region": {
      "description": "Name of the region of interest, in the native language of that region. For a list of valid names, input a random character string and run.",
      "label": "State/Province name",
      "type": "text",
      "example": null,
      "weight": 1
    },
    "NDVI>calculateNDVI.yml@199|start_date": {
      "description": "Start date for summarizing vegetation index",
      "label": "Start date",
      "type": "text",
      "example": "2024-01-01",
      "weight": 2
    },
    "NDVI>calculateNDVI.yml@199|end_date": {
      "description": "End date for summarizing vegetation index",
      "label": "End date",
      "type": "text",
      "example": "2024-01-31",
      "weight": 3
    },
    "NDVI>calculateNDVI.yml@199|spatial_resolution": {
      "description": "Spatial resolution of the raster for plotting, leave blank to have the original spatial resolution of the layer (10m x 10m). If using a projected CRS, the resolution should be in meters. If using an unprojected CRS (e.g. EPSG:4326), this must be in degrees (0.008 degrees is ~1km at the equator).\n\nLeave blank to have the original spatial resolution of the layer (10m x 10m).",
      "label": "Spatial resolution",
      "type": "float",
      "example": 0.008,
      "weight": 4
    },
    "NDVI>calculateNDVI.yml@199|summary_statistic": {
      "description": "Statistic to summarize layers over time for summarised raster layer and space for plot of ndvi means over time",
      "label": "Summary statistic",
      "type": "options",
      "options": [
        "mean",
        "median",
        "max",
        "min"
      ],
      "example": "mean",
      "weight": 5
    },
    "NDVI>calculateNDVI.yml@199|crs": {
      "description": "Coordinate reference system (EPSG number or WKT2 string) in which the output file must be generated",
      "label": "Coordinate reference system",
      "type": "text",
      "example": "EPSG:4326",
      "weight": 6
    }
  },
  "outputs": {
    "getCountrybbox.json@198|data>getCountryPolygon.yml@12|country": {
      "description": "Name of country of interest",
      "label": "Country",
      "type": "text",
      "weight": 0
    },
    "getCountrybbox.json@198|data>getCountryPolygon.yml@12|region": {
      "description": "Name of state/province of interest",
      "label": "Region",
      "type": "text",
      "weight": 1
    },
    "NDVI>calculateNDVI.yml@199|rasters": {
      "description": "Raster of the NDVI values summarised by the input statistic (mean, max, min, median) for each pixel within the time span choosen. If multiple indices were chosen, each band corresponds to a different vegetation index\n",
      "label": "Vegetation index rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 2
    },
    "NDVI>calculateNDVI.yml@199|timeseries": {
      "description": "Time series of NDVI values for every date where there is data in the specified time period.",
      "label": "Time series of NDVI",
      "type": "text/csv",
      "weight": 3
    },
    "NDVI>calculateNDVI.yml@199|timeseries_plot": {
      "description": "Plot of NDVI values over time",
      "label": "NDVI time series plot",
      "type": "image/png",
      "weight": 4
    }
  },
  "metadata": {
    "name": "Normalized Difference Vegetation Index",
    "description": "## Introduction\nThis pipeline calculates the Normalized Difference Vegetation Index (NDVI) using OpenEO  Copernicus Data Space Ecosystem. NDVI measures the \"greenness\" of vegetation, with higher  values indicating dense vegatation and low values indicating barren areas with rock, snow, sand, or exposed soils.\n\nThe red and infrared bands from Sentinel 2 L2A are used to calcuate NDVI. The pipeline  summarises these values over the time period of interest with the specified summary statistic. The NDVi layers are masked with the SCL dilation mask avoid erroneous values by taking out pixels covered by clouds.\n- Learn more about Sentinel 2 [here](https://dataspace.copernicus.eu/data-collections/copernicus-sentinel-data/sentinel-2)\n- Learn more about calculating NDVI with openEO [here](https://openeo.org/documentation/1.0/cookbook/#example-1-ndvi)\n## Before you start\nThe pipeline requires an API key for the Copernicus Data Space Ecosystem. To acquire an API key, visit the CDSE [website](https://dataspace.copernicus.eu/analyse/openeo).\n\nThe pipeline may take significant time to pull and summarise data,  especially at fine spatial resolutions for large areas.",
    "author": [
      {
        "name": "Guillaume Larocque",
        "email": "guillaume.larocque@mcgill.ca",
        "identifier": "https://orcid.org/0000-0002-5967-9156",
        "role": "Pipeline development"
      },
      {
        "name": "Jory Griffith",
        "email": "jory.griffith@mcgill.ca",
        "identifier": "https://orcid.org/0000-0001-6020-6690",
        "role": "Pipeline development"
      }
    ]
  }
}