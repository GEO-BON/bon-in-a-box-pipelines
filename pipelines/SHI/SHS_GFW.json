{
  "nodes": [
    {
      "id": "65",
      "type": "io",
      "position": {
        "x": 254.22690014074408,
        "y": 473.5977946937229
      },
      "data": {
        "descriptionFile": "data>getRangeMap.yml"
      }
    },
    {
      "id": "67",
      "type": "io",
      "position": {
        "x": 1671.953125,
        "y": 284
      },
      "data": {
        "descriptionFile": "SHI>habitatChange_GFW.yml"
      }
    },
    {
      "id": "71",
      "type": "output",
      "position": {
        "x": 2330.09816271835,
        "y": 304.0557197118165
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "76",
      "type": "userInput",
      "position": {
        "x": 0.953125,
        "y": 385
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "Myrmecophaga tridactyla"
        ]
      }
    },
    {
      "id": "77",
      "type": "userInput",
      "position": {
        "x": -63.046875,
        "y": 535
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "IUCN",
        "options": [
          "MOL",
          "IUCN",
          "QC"
        ]
      }
    },
    {
      "id": "79",
      "type": "userInput",
      "position": {
        "x": -265.636227273672,
        "y": 172.40703991913676
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 1000
      }
    },
    {
      "id": "80",
      "type": "io",
      "position": {
        "x": 887.953125,
        "y": 400
      },
      "data": {
        "descriptionFile": "data>getAreaOfHabitat.yml"
      }
    },
    {
      "id": "81",
      "type": "output",
      "position": {
        "x": 2332.7383499594216,
        "y": 394.7450672747206
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "82",
      "type": "output",
      "position": {
        "x": 2330.5706775615668,
        "y": 350.4503354491608
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "83",
      "type": "io",
      "position": {
        "x": 318.7346968660779,
        "y": 271.0543692002653
      },
      "data": {
        "descriptionFile": "getCountrybbox.json"
      }
    },
    {
      "id": "84",
      "type": "io",
      "position": {
        "x": 454.81697944261873,
        "y": 621.4672754445984
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "85",
      "type": "constant",
      "position": {
        "x": 51.236649247438606,
        "y": 594.7139146129008
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "86",
      "type": "constant",
      "position": {
        "x": 43.887960158431554,
        "y": 622.8838894540945
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "earthenv_topography|elevation_min",
          "earthenv_topography|elevation_max"
        ]
      }
    },
    {
      "id": "87",
      "type": "constant",
      "position": {
        "x": 64.4163755627336,
        "y": 637.9007740251292
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "88",
      "type": "constant",
      "position": {
        "x": 63.19159404789906,
        "y": 648.9238076586398
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "89",
      "type": "constant",
      "position": {
        "x": 63.803984805316304,
        "y": 661.7840135644021
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "90",
      "type": "userInput",
      "position": {
        "x": -251.3645995282239,
        "y": 333.7476662032601
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "application/geopackage+sqlite3"
      }
    },
    {
      "id": "91",
      "type": "userInput",
      "position": {
        "x": -285.31685434062604,
        "y": 58.654549918101566
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:4326"
      }
    }
  ],
  "edges": [
    {
      "source": "67",
      "sourceHandle": "df_shs",
      "target": "71",
      "targetHandle": null,
      "id": "reactflow__edge-67df_shs-71"
    },
    {
      "source": "76",
      "sourceHandle": null,
      "target": "65",
      "targetHandle": "species",
      "id": "reactflow__edge-76-65species"
    },
    {
      "source": "77",
      "sourceHandle": null,
      "target": "65",
      "targetHandle": "expert_source",
      "id": "reactflow__edge-77-65expert_source"
    },
    {
      "source": "76",
      "sourceHandle": null,
      "target": "67",
      "targetHandle": "species",
      "id": "reactflow__edge-76-67species"
    },
    {
      "source": "79",
      "sourceHandle": null,
      "target": "67",
      "targetHandle": "spat_res",
      "id": "reactflow__edge-79-67spat_res"
    },
    {
      "source": "65",
      "sourceHandle": "sf_range_map",
      "target": "80",
      "targetHandle": "sf_range_map",
      "id": "reactflow__edge-65sf_range_map-80sf_range_map"
    },
    {
      "source": "79",
      "sourceHandle": null,
      "target": "80",
      "targetHandle": "spat_res",
      "id": "reactflow__edge-79-80spat_res"
    },
    {
      "source": "80",
      "sourceHandle": "r_area_of_habitat",
      "target": "67",
      "targetHandle": "r_area_of_habitat",
      "id": "reactflow__edge-80r_area_of_habitat-67r_area_of_habitat"
    },
    {
      "source": "80",
      "sourceHandle": "sf_bbox",
      "target": "67",
      "targetHandle": "sf_bbox",
      "id": "reactflow__edge-80sf_bbox-67sf_bbox"
    },
    {
      "source": "76",
      "sourceHandle": null,
      "target": "80",
      "targetHandle": "species",
      "id": "reactflow__edge-76-80species"
    },
    {
      "source": "67",
      "sourceHandle": "img_shs_timeseries",
      "target": "71",
      "targetHandle": null,
      "id": "reactflow__edge-67img_shs_timeseries-71"
    },
    {
      "source": "67",
      "sourceHandle": "img_shs_map",
      "target": "71",
      "targetHandle": null,
      "id": "reactflow__edge-67img_shs_map-71"
    },
    {
      "source": "67",
      "sourceHandle": "habitat_change_map",
      "target": "81",
      "targetHandle": null,
      "id": "reactflow__edge-67habitat_change_map-81"
    },
    {
      "source": "67",
      "sourceHandle": "r_habitat_by_tstep",
      "target": "82",
      "targetHandle": null,
      "id": "reactflow__edge-67r_habitat_by_tstep-82"
    },
    {
      "source": "83",
      "sourceHandle": "data>getCountryPolygon.yml@12|country_region_polygon",
      "target": "80",
      "targetHandle": "country_region_polygon",
      "id": "reactflow__edge-83data>getCountryPolygon.yml@12|country_region_polygon-80country_region_polygon"
    },
    {
      "source": "84",
      "sourceHandle": "rasters",
      "target": "80",
      "targetHandle": "rasters",
      "id": "reactflow__edge-84rasters-80rasters"
    },
    {
      "source": "85",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-85-84stac_url"
    },
    {
      "source": "83",
      "sourceHandle": "data>getBoundingBox.yml@0|bbox",
      "target": "84",
      "targetHandle": "bbox",
      "id": "reactflow__edge-83data>getBoundingBox.yml@0|bbox-84bbox"
    },
    {
      "source": "86",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-86-84collections_items"
    },
    {
      "source": "87",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "t0",
      "id": "reactflow__edge-87-84t0"
    },
    {
      "source": "88",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "t1",
      "id": "reactflow__edge-88-84t1"
    },
    {
      "source": "89",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-89-84temporal_res"
    },
    {
      "source": "79",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-79-84spatial_res"
    },
    {
      "source": "90",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "study_area",
      "id": "reactflow__edge-90-84study_area"
    },
    {
      "source": "90",
      "sourceHandle": null,
      "target": "80",
      "targetHandle": "study_area",
      "id": "reactflow__edge-90-80study_area"
    },
    {
      "source": "91",
      "sourceHandle": null,
      "target": "83",
      "targetHandle": "pipeline@2",
      "id": "reactflow__edge-91-83pipeline@2"
    },
    {
      "source": "91",
      "sourceHandle": null,
      "target": "84",
      "targetHandle": "crs",
      "id": "reactflow__edge-91-84crs"
    },
    {
      "source": "91",
      "sourceHandle": null,
      "target": "80",
      "targetHandle": "srs",
      "id": "reactflow__edge-91-80srs"
    },
    {
      "source": "91",
      "sourceHandle": null,
      "target": "67",
      "targetHandle": "srs",
      "id": "reactflow__edge-91-67srs"
    }
  ],
  "inputs": {
    "getCountrybbox.json@83|data>getCountryPolygon.yml@12|country": {
      "description": "ISO3 country code for the country of interest. For a list of ISO3 country codes,\nlook [here](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).\n",
      "label": "ISO3 country code",
      "type": "text",
      "example": "COL",
      "weight": 0
    },
    "getCountrybbox.json@83|data>getCountryPolygon.yml@12|region": {
      "description": "ISO 3166-2 code for province or region, see more [here](en.wikipedia.org/wiki/ISO_3166-2)",
      "label": "State/Province code",
      "type": "text",
      "example": null,
      "weight": 1
    },
    "pipeline@76": {
      "label": "Species",
      "description": "Scientific name of the species. Multiple species names can be specified, separated with a comma.",
      "type": "text[]",
      "example": [
        "Myrmecophaga tridactyla"
      ],
      "weight": 2
    },
    "data>getAreaOfHabitat.yml@80|buff_size": {
      "description": "Size of the buffer around the study area. If it is not defined it will be estimated as half of the total width of the study area.",
      "label": "Buffer for study area",
      "type": "int",
      "example": 0,
      "weight": 3
    },
    "pipeline@90": {
      "label": "Study area",
      "description": "Custom polygon of study area used to mask output layers, in geopackage format. This input is for user's to input their own polygon rather than inputing a country/region.",
      "type": "application/geopackage+sqlite3",
      "example": null,
      "weight": 4
    },
    "pipeline@91": {
      "label": "Coordinate reference system",
      "description": "Numerical value referring to the EPSG code (European Petroleum Survey Group) associated with the spatial reference system that will be used as a reference for the study area.\nThis numerical value specifies the projection and geodetic datum used to define the coordinates and spatial representation of the data in the study area.\nThis MUST be in a projected reference system (not lat long).\n\nFor further information on coordinate systems and EPSG codes, you can access the official database on the EPSG website at [https://epsg.org/home.html](https://epsg.org/home.html).\nThe website provides documentation, resources, and tools for searching and understanding the EPSG codes used in various geospatial contexts.\n",
      "type": "text",
      "example": "EPSG:3116",
      "weight": 5
    },
    "SHI>habitatChange_GFW.yml@67|t_0": {
      "description": "Year where the analysis should start. Starts in 2000, check the time interval available for the Global Forest Watch data at https://stac.geobon.org/collections/gfw-lossyear.",
      "label": "Start year",
      "type": "int",
      "example": 2000,
      "weight": 6
    },
    "SHI>habitatChange_GFW.yml@67|t_n": {
      "description": "Year where the analysis should end (it should be later than Initial time). It should be inside the time interval for the Global Forest Watch data at https://stac.geobon.org/collections/gfw-lossyear.",
      "label": "End year",
      "type": "int",
      "example": 2020,
      "weight": 7
    },
    "SHI>habitatChange_GFW.yml@67|time_step": {
      "description": "Temporal resolution for analysis given in number of years. To get values for the end year, time step should fit evenly into the given analysis range.",
      "label": "Time step",
      "type": "int",
      "example": 10,
      "weight": 8
    },
    "data>getAreaOfHabitat.yml@80|range_map_type": {
      "description": "Select type of range map according to the type of the source file: 1) polygon, 2) raster, 3) an intersection between the raster and polygon files.",
      "label": "Type of range map",
      "type": "options",
      "options": [
        "Polygon",
        "Raster",
        "Both"
      ],
      "example": "Polygon",
      "weight": 9
    },
    "pipeline@77": {
      "label": "Source of expert range map",
      "description": "Source of the expert range map for the species. The options are:\nMap of Life (MOL), International union for conservation of nature (IUCN) and range maps from the Ministère de l’Environnement du Québec (QC).\n",
      "type": "options",
      "example": "IUCN",
      "options": [
        "MOL",
        "IUCN",
        "QC"
      ],
      "weight": 10
    },
    "data>getAreaOfHabitat.yml@80|r_range_map": {
      "description": "Raster with expected area for the species if choosing option \"Raster\"",
      "label": "Range map (raster)",
      "type": "image/tiff;application=geotiff[]",
      "example": [
        null
      ],
      "weight": 11
    },
    "SHI>habitatChange_GFW.yml@67|min_forest": {
      "description": "Minimum tree cover percentage required for each species, based on suitable habitat of the species. Acts as a filter for the Global Forest Watch Data. If not available, use Map of Life Values (e.g. [https://mol.org/species/range/Saguinus_oedipus])",
      "label": "Minimum forest cover percentage",
      "type": "int[]",
      "example": [
        50
      ],
      "weight": 12
    },
    "SHI>habitatChange_GFW.yml@67|max_forest": {
      "description": "Maximum tree cover percentage required for each species, based on suitable habitat of the species. Acts as a filter for the Global Forest Watch Data. If not available, use Map of Life Values (e.g. [https://mol.org/species/range/Saguinus_oedipus])",
      "label": "Maximum forest cover percentage",
      "type": "int[]",
      "example": [
        100
      ],
      "weight": 13
    },
    "pipeline@79": {
      "label": "Spatial resolution",
      "description": "Spatial resolution (in meters) for the analysis.",
      "type": "int",
      "example": 1000,
      "weight": 14
    },
    "data>getAreaOfHabitat.yml@80|elevation_filter": {
      "description": "If 'yes' an elevation filter using IUCN information is applied, if 'no' the range map is taken as the area of habitat.",
      "label": "Filter by elevation",
      "type": "options",
      "options": [
        "Yes",
        "No"
      ],
      "example": "Yes",
      "weight": 15
    },
    "data>getAreaOfHabitat.yml@80|elev_buffer": {
      "description": "Elevation buffer in meters to add (or substract) to the reported species elevation range. Default is zero. Positive values will increase the range in that value in meters and negative values will reduce the range in that value.",
      "label": "Elevation buffer",
      "type": "int",
      "example": null,
      "weight": 16
    },
    "data>loadFromStac.yml@84|resampling": {
      "description": "Resampling method used when rescaling and/or reprojecting the raster layers. See [gdalwarp](https://gdal.org/en/latest/programs/gdalwarp.html) for description.",
      "label": "Resampling method",
      "type": "options",
      "options": [
        "near",
        "bilinear",
        "average",
        "mode",
        "cubic",
        "cubicspline",
        "lanczos",
        "rms",
        "min",
        "max",
        "sum",
        "med",
        "q1",
        "q3"
      ],
      "example": "near",
      "weight": 17
    },
    "data>loadFromStac.yml@84|aggregation": {
      "description": "Method used to aggregate items when layers combining over time.",
      "label": "Aggregation method",
      "type": "options",
      "options": [
        "first",
        "min",
        "max",
        "mean",
        "median"
      ],
      "example": "first",
      "weight": 18
    }
  },
  "outputs": {
    "SHI>habitatChange_GFW.yml@67|img_shs_map": {
      "description": "Figure showing a map with changes in the habitat for the time range for each species.",
      "label": "SHS map",
      "type": "image/png[]",
      "weight": 0
    },
    "SHI>habitatChange_GFW.yml@67|df_shs": {
      "description": "A TSV (Tab Separated Values) file containing Area Score, Connectivity Score and SHS by time step for each species. Percentage of change, 100% being equal to the reference year.",
      "label": "SHS table",
      "type": "text/tab-separated-values[]",
      "weight": 1
    },
    "SHI>habitatChange_GFW.yml@67|img_shs_timeseries": {
      "description": "Figure showing a time series of SHS values per time step for each species.",
      "label": "SHS time series",
      "type": "image/png[]",
      "weight": 2
    },
    "SHI>habitatChange_GFW.yml@67|habitat_change_map": {
      "description": "Figure showing a map with changes in the habitat for the time range for each species (raster).",
      "label": "SHS Map (raster)",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    },
    "SHI>habitatChange_GFW.yml@67|r_habitat_by_tstep": {
      "description": "Raster of habitat by time step.",
      "label": "Habitat by time step",
      "type": "image/tiff;application=geotiff[]",
      "weight": 4
    }
  },
  "metadata": {
    "name": "Species Habitat Score",
    "description": "This pipeline measures the Species Habitat Score (SHS), for the species used as inputs. It uses the range maps, the elevation ranges and the habitat categories available from The International Union for Conservation of Nature (IUCN). Changes in the habitat are measured using the Global Forest Watch layers and soon other land cover layers will be added. For the specific case of Quebec it has range maps available from the Ministère de l’Environnement. The outputs are a table with the changes in the area of the habitat by year requested and a graph with a timeseries of these values. Rasters of the habitat available for each year can also be requested.",
    "author": [
      {
        "name": "Maria Isabel Arce-Plata",
        "identifier": "https://orcid.org/0000-0003-4024-9268",
        "role": "Pipeline development"
      },
      {
        "name": "Guillaume Larocque",
        "email": "guillaume.larocque@mcgill.ca",
        "identifier": "https://orcid.org/0000-0002-5967-9156",
        "role": "Pipeline development"
      }
    ],
    "license": "CC BY",
    "external_link": "https://github.com/GEO-BON/biab-2.0/tree/main/scripts/SHI"
  }
}