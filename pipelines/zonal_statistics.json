{
  "nodes": [
    {
      "id": "4",
      "type": "io",
      "position": {
        "x": 1507,
        "y": 231
      },
      "data": {
        "descriptionFile": "zonal_statistics>zonal_stats.yml"
      }
    },
    {
      "id": "6",
      "type": "output",
      "position": {
        "x": 1924,
        "y": 69
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "21",
      "type": "io",
      "position": {
        "x": 452,
        "y": 80
      },
      "data": {
        "descriptionFile": "data>getCountryPolygon.yml"
      }
    },
    {
      "id": "22",
      "type": "output",
      "position": {
        "x": 1054,
        "y": 241
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "24",
      "type": "output",
      "position": {
        "x": 1054,
        "y": 12
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "io",
      "position": {
        "x": 1054,
        "y": 69
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "26",
      "type": "output",
      "position": {
        "x": 1507,
        "y": 40.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "27",
      "type": "userInput",
      "position": {
        "x": 12,
        "y": 67.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "bboxCRS"
      }
    }
  ],
  "edges": [
    {
      "source": "4",
      "sourceHandle": "zonal_stats",
      "target": "6",
      "targetHandle": null,
      "id": "reactflow__edge-4zonal_stats-6"
    },
    {
      "source": "21",
      "sourceHandle": "country",
      "target": "22",
      "targetHandle": null,
      "id": "reactflow__edge-21country-22"
    },
    {
      "source": "21",
      "sourceHandle": "country_region_polygon",
      "target": "24",
      "targetHandle": null,
      "id": "reactflow__edge-21country_region_polygon-24"
    },
    {
      "source": "21",
      "sourceHandle": "country_region_polygon",
      "target": "4",
      "targetHandle": "study_area_polygon",
      "id": "reactflow__edge-21country_region_polygon-4study_area_polygon"
    },
    {
      "source": "21",
      "sourceHandle": "country_region_polygon",
      "target": "25",
      "targetHandle": "study_area",
      "id": "reactflow__edge-21country_region_polygon-25study_area"
    },
    {
      "source": "25",
      "sourceHandle": "rasters",
      "target": "4",
      "targetHandle": "rasters",
      "id": "reactflow__edge-25rasters-4rasters"
    },
    {
      "source": "25",
      "sourceHandle": "rasters",
      "target": "26",
      "targetHandle": null,
      "id": "reactflow__edge-25rasters-26"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "21",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-27-21bbox_crs"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-27-25bbox_crs"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "4",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-27-4bbox_crs"
    }
  ],
  "inputs": {
    "pipeline@27": {
      "label": "Bounding box and CRS",
      "description": "Select a country/region and a CRS to obtain the associated bounding box.",
      "type": "bboxCRS",
      "example": null,
      "weight": 0
    },
    "zonal_statistics>zonal_stats.yml@4|summary_statistic": {
      "description": "Summary statistic for layers",
      "label": "Summary statistic",
      "type": "options[]",
      "options": [
        "mean",
        "median",
        "sum",
        "min",
        "max",
        "stdev",
        "variance",
        "mode"
      ],
      "example": [
        "mean",
        "variance"
      ],
      "weight": 1
    },
    "data>loadFromStac.yml@25|stac_url": {
      "description": "URL of the STAC catalog.",
      "label": "STAC URL",
      "type": "text",
      "example": "https://stac.geobon.org/",
      "weight": 2
    },
    "data>loadFromStac.yml@25|collections_items": {
      "description": "Vector of strings. To pull specific collection items, input the collection name followed by '|' followed by item id (e.g. \"chelsa-clim|bio1\"). To extract a whole collection, type the collection name only (e.g. \"chelsa-clim\"). To pull collection items by date, write the collection name and provide a start date, end date, and temporal resolution.",
      "label": "STAC collection items",
      "type": "text[]",
      "example": [
        "chelsa-clim|bio1",
        "chelsa-clim|bio2"
      ],
      "weight": 3
    },
    "data>loadFromStac.yml@25|t0": {
      "description": "Start date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank if extracting items by name.",
      "label": "Start date",
      "type": "text",
      "example": null,
      "weight": 4
    },
    "data>loadFromStac.yml@25|t1": {
      "description": "End date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank if extracting items by name.",
      "label": "End date",
      "type": "text",
      "example": null,
      "weight": 5
    },
    "data>loadFromStac.yml@25|temporal_res": {
      "description": "Temporal resolution to use when querying STAC items by date, in the format (\"P\", time interval, and time unit, e.g. \"P1Y\" is yearly, \"P1M\" is montly, and \"P1D\" is daily). Leave blank if not querying by date. If the temporal resolution is coarser than the temporal resolution of the time series, the layers will be aggregated with the aggregation method chosen below.",
      "label": "Temporal resolution",
      "type": "text",
      "example": null,
      "weight": 6
    },
    "data>loadFromStac.yml@25|spatial_res": {
      "description": "Integer, spatial resolution of the rasters in the same units as the coordinate reference system (meters for projected reference systems and degrees for reference systems in lat long).",
      "label": "Spatial resolution",
      "type": "float",
      "example": 1000,
      "weight": 7
    },
    "data>loadFromStac.yml@25|resampling": {
      "description": "Resampling method used when rescaling and/or reprojecting the raster layers. See [gdalwarp](https://gdal.org/en/latest/programs/gdalwarp.html) for description.",
      "label": "Resampling method",
      "type": "options",
      "options": [
        "near",
        "bilinear",
        "average",
        "mode",
        "cubic",
        "cubicspline",
        "lanczos",
        "rms",
        "min",
        "max",
        "sum",
        "med",
        "q1",
        "q3"
      ],
      "example": "near",
      "weight": 8
    },
    "data>loadFromStac.yml@25|aggregation": {
      "description": "Method used to aggregate items when layers combining over time.",
      "label": "Aggregation method",
      "type": "options",
      "options": [
        "first",
        "min",
        "max",
        "mean",
        "median"
      ],
      "example": "first",
      "weight": 9
    }
  },
  "outputs": {
    "data>getCountryPolygon.yml@21|country": {
      "description": "Name of country of interest",
      "label": "Country",
      "type": "text",
      "weight": 0
    },
    "data>getCountryPolygon.yml@21|country_region_polygon": {
      "description": "A GeoPackage file containing the polygon of the chosen country or region of interest, in the specified crs.",
      "label": "Polygon of country or region",
      "type": "application/geopackage+sqlite3",
      "weight": 1
    },
    "zonal_statistics>zonal_stats.yml@4|zonal_stats": {
      "description": "Summary statistic over the polygon",
      "label": "Summary statistic",
      "type": "text/csv",
      "weight": 2
    },
    "data>loadFromStac.yml@25|rasters": {
      "description": "Output raster files in geotiff format.",
      "label": "Rasters",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    }
  },
  "metadata": {
    "name": "Zonal statistics for STAC items in a region",
    "description": "This pipeline extracts zonal statistics for STAC catalog items in a country or subnational region of interest.",
    "author": [
      {
        "name": "Jory Griffith",
        "email": "jory.griffith@mcgill.ca",
        "identifier": "https://orcid.org/0000-0001-6020-6690",
        "role": "Pipeline development"
      }
    ],
    "license": "CC-BY",
    "references": [
      {
        "text": "Daniel Baston (2023)",
        "doi": "https://doi.org/10.32614/CRAN.package.exactextractr"
      }
    ]
  }
}