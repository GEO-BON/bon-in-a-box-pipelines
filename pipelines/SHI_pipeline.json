{
  "nodes": [
    {
      "id": "27",
      "type": "io",
      "position": {
        "x": 622,
        "y": 370.5
      },
      "data": {
        "descriptionFile": "SHI>scp_SHI_01_GetRangeMap.yml"
      }
    },
    {
      "id": "28",
      "type": "io",
      "position": {
        "x": 1210,
        "y": 426.5
      },
      "data": {
        "descriptionFile": "SHI>scp_SHI_02_GetAOH.yml"
      }
    },
    {
      "id": "29",
      "type": "io",
      "position": {
        "x": 1802,
        "y": 90.5
      },
      "data": {
        "descriptionFile": "SHI>scp_SHI_03_HabitatChange_GFW.yml"
      }
    },
    {
      "id": "30",
      "type": "userInput",
      "position": {
        "x": 12,
        "y": 310
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": ["Saguinus oedipus"]
      }
    },
    {
      "id": "31",
      "type": "userInput",
      "position": {
        "x": 747,
        "y": 141.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 1000
      }
    },
    {
      "id": "32",
      "type": "userInput",
      "position": {
        "x": 739,
        "y": 176.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:3116"
      }
    },
    {
      "id": "33",
      "type": "userInput",
      "position": {
        "x": 763,
        "y": 211.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "Country",
        "options": ["Country", "Region in Country", "User defined"]
      }
    },
    {
      "id": "34",
      "type": "constant",
      "position": {
        "x": 253,
        "y": 246.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "application/geopackage+sqlite3 ; application/geo+json ; application/dbf",
        "value": null
      }
    },
    {
      "id": "35",
      "type": "constant",
      "position": {
        "x": 739,
        "y": 284.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": null
      }
    },
    {
      "id": "36",
      "type": "constant",
      "position": {
        "x": 818,
        "y": 333.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "Polygon",
        "options": ["Polygon", "Raster", "Both"]
      }
    },
    {
      "id": "37",
      "type": "constant",
      "position": {
        "x": 845,
        "y": 525.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "Yes",
        "options": ["Yes", "No"]
      }
    },
    {
      "id": "38",
      "type": "constant",
      "position": {
        "x": 739,
        "y": 562.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 0
      }
    },
    {
      "id": "40",
      "type": "output",
      "position": {
        "x": 2359,
        "y": 72.53027424174604
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "41",
      "type": "output",
      "position": {
        "x": 2357.352817965465,
        "y": 120.71401427931966
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "42",
      "type": "output",
      "position": {
        "x": 2359,
        "y": 233
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "43",
      "type": "output",
      "position": {
        "x": 2359,
        "y": 282
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "45",
      "type": "constant",
      "position": {
        "x": 537,
        "y": 460.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "image/tiff;application=geotiff[]",
        "value": []
      }
    },
    {
      "id": "46",
      "type": "io",
      "position": {
        "x": 2359,
        "y": 341
      },
      "data": {
        "descriptionFile": "SHI>scp_SHI_04_CalcSHI.yml"
      }
    },
    {
      "id": "47",
      "type": "output",
      "position": {
        "x": 2813,
        "y": 311.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "48",
      "type": "output",
      "position": {
        "x": 2813,
        "y": 401.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "49",
      "type": "output",
      "position": {
        "x": 2813,
        "y": 450.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "50",
      "type": "output",
      "position": {
        "x": 1240.2248673169506,
        "y": 831.113448763316
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "51",
      "type": "userInput",
      "position": {
        "x": 629.2411885087829,
        "y": 767.9991392623689
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "COL"
      }
    },
    {
      "id": "52",
      "type": "output",
      "position": {
        "x": 1854.0468157987307,
        "y": 790.2891861564518
      },
      "data": {
        "label": "Output"
      }
    }
  ],
  "edges": [
    {
      "source": "30",
      "sourceHandle": null,
      "target": "27",
      "targetHandle": "species",
      "id": "reactflow__edge-30-27species"
    },
    {
      "source": "30",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "species",
      "id": "reactflow__edge-30-28species"
    },
    {
      "source": "27",
      "sourceHandle": "sf_range_map",
      "target": "28",
      "targetHandle": "sf_range_map",
      "id": "reactflow__edge-27sf_range_map-28sf_range_map"
    },
    {
      "source": "31",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "spat_res",
      "id": "reactflow__edge-31-28spat_res"
    },
    {
      "source": "32",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "srs",
      "id": "reactflow__edge-32-28srs"
    },
    {
      "source": "33",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "study_area_opt",
      "id": "reactflow__edge-33-28study_area_opt"
    },
    {
      "source": "34",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "study_area",
      "id": "reactflow__edge-34-28study_area"
    },
    {
      "source": "35",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "buff_size",
      "id": "reactflow__edge-35-28buff_size"
    },
    {
      "source": "36",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "range_map_type",
      "id": "reactflow__edge-36-28range_map_type"
    },
    {
      "source": "37",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "elevation_filter",
      "id": "reactflow__edge-37-28elevation_filter"
    },
    {
      "source": "38",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "elev_buffer",
      "id": "reactflow__edge-38-28elev_buffer"
    },
    {
      "source": "28",
      "sourceHandle": "r_area_of_habitat",
      "target": "29",
      "targetHandle": "r_area_of_habitat",
      "id": "reactflow__edge-28r_area_of_habitat-29r_area_of_habitat"
    },
    {
      "source": "28",
      "sourceHandle": "sf_bbox",
      "target": "29",
      "targetHandle": "sf_bbox",
      "id": "reactflow__edge-28sf_bbox-29sf_bbox"
    },
    {
      "source": "30",
      "sourceHandle": null,
      "target": "29",
      "targetHandle": "species",
      "id": "reactflow__edge-30-29species"
    },
    {
      "source": "31",
      "sourceHandle": null,
      "target": "29",
      "targetHandle": "spat_res",
      "id": "reactflow__edge-31-29spat_res"
    },
    {
      "source": "32",
      "sourceHandle": null,
      "target": "29",
      "targetHandle": "srs",
      "id": "reactflow__edge-32-29srs"
    },
    {
      "source": "29",
      "sourceHandle": "img_shs_map",
      "target": "40",
      "targetHandle": null,
      "id": "reactflow__edge-29img_shs_map-40"
    },
    {
      "source": "29",
      "sourceHandle": "r_habitat_by_tstep",
      "target": "41",
      "targetHandle": null,
      "id": "reactflow__edge-29r_habitat_by_tstep-41"
    },
    {
      "source": "29",
      "sourceHandle": "img_shs_timeseries",
      "target": "42",
      "targetHandle": null,
      "id": "reactflow__edge-29img_shs_timeseries-42"
    },
    {
      "source": "29",
      "sourceHandle": "df_shs",
      "target": "43",
      "targetHandle": null,
      "id": "reactflow__edge-29df_shs-43"
    },
    {
      "source": "45",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "r_range_map",
      "id": "reactflow__edge-45-28r_range_map"
    },
    {
      "source": "28",
      "sourceHandle": "df_aoh_areas",
      "target": "46",
      "targetHandle": "df_aoh_areas",
      "id": "reactflow__edge-28df_aoh_areas-46df_aoh_areas"
    },
    {
      "source": "29",
      "sourceHandle": "df_shs_tidy",
      "target": "46",
      "targetHandle": "df_shs_tidy",
      "id": "reactflow__edge-29df_shs_tidy-46df_shs_tidy"
    },
    {
      "source": "46",
      "sourceHandle": "df_shi",
      "target": "47",
      "targetHandle": null,
      "id": "reactflow__edge-46df_shi-47"
    },
    {
      "source": "46",
      "sourceHandle": "img_shi_timeseries",
      "target": "48",
      "targetHandle": null,
      "id": "reactflow__edge-46img_shi_timeseries-48"
    },
    {
      "source": "46",
      "sourceHandle": "img_w_shi_timeseries",
      "target": "49",
      "targetHandle": null,
      "id": "reactflow__edge-46img_w_shi_timeseries-49"
    },
    {
      "source": "30",
      "sourceHandle": null,
      "target": "50",
      "targetHandle": null,
      "id": "reactflow__edge-30-50"
    },
    {
      "source": "51",
      "sourceHandle": null,
      "target": "28",
      "targetHandle": "country_code",
      "id": "reactflow__edge-51-28country_code"
    },
    {
      "source": "51",
      "sourceHandle": null,
      "target": "52",
      "targetHandle": null,
      "id": "reactflow__edge-51-52"
    }
  ],
  "inputs": {
    "SHI>scp_SHI_01_GetRangeMap.yml@27|expert_source": {
      "description": "Source of the expert range map for the species.",
      "label": "source of expert range map",
      "type": "options",
      "options": ["MOL", "IUCN", "QC"],
      "example": "IUCN"
    },
    "SHI>scp_SHI_02_GetAOH.yml@28|region": {
      "description": "For cases when a more specific administrative boundary (than the country level) is required, a region name can be used. This name should be aligned with the codification from the GADM data [https://gadm.org/metadata.html] for the variable NAME_1 (check gadm function in R from the geodata package [https://rdrr.io/github/rspatial/geodata/man/gadm.html])",
      "label": "region",
      "type": "text"
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|min_forest": {
      "description": "Minimum tree cover percentage required, based on suitable habitat of the species. Acts as a filter for the Global Forest Watch Data. If not available, use Map of Life Values (e.g. [https://mol.org/species/range/Saguinus_oedipus])",
      "label": "min forest",
      "type": "int[]",
      "example": [50]
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|max_forest": {
      "description": "Maximum tree cover percentage required, based on suitable habitat of the species. Acts as a filter for the Global Forest Watch Data. If not available, use Map of Life Values (e.g. [https://mol.org/species/range/Saguinus_oedipus])",
      "label": "max forest",
      "type": "int[]",
      "example": [100]
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|t_0": {
      "description": "Year where the analysis should start. Global Forest Watch data is available from the year 2000 to 2020.",
      "label": "initial time",
      "type": "int",
      "example": 2000
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|t_n": {
      "description": "Year where the analysis should end (it should be later than Initial time)",
      "label": "final time",
      "type": "int",
      "example": 2020
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|time_step": {
      "description": "Temporal resolution for analysis given in number of years. To get values for the end year, time step should fit evenly into the given analysis range.",
      "label": "time step",
      "type": "int",
      "example": 10
    },
    "pipeline@30": {
      "label": "species",
      "description": "Scientific name of the species.",
      "type": "text[]",
      "example": ["Saguinus oedipus"]
    },
    "pipeline@31": {
      "label": "output spatial resolution",
      "description": "Spatial resolution (in meters) for the output of the analysis.",
      "type": "int",
      "example": 1000
    },
    "pipeline@32": {
      "label": "spatial reference system",
      "description": "Reference system for the area of interest. It can be 1) the Spatial Reference System Identifier (SRID), 2) the authority name (e.g. EPSG) with the SRID or 3) the description of the spatial reference system details (e.g. [https://spatialreference.org/]). If just the SRID is given and the software can not find the reference system try options 2 or 3.",
      "type": "text",
      "example": "EPSG:3116"
    },
    "pipeline@33": {
      "label": "study area option",
      "description": "Choose the source for the study area either if it should be at a country level and downloaded according to the 'country_code', at region level according to 'region' or user defined polygon with the borders of the study area.",
      "type": "options",
      "example": "Country",
      "options": ["Country", "Region in Country", "User defined"]
    },
    "pipeline@51": {
      "label": "country code",
      "description": "Three letter code for the country where the SHI is calculated.",
      "type": "text",
      "example": "COL"
    }
  },
  "outputs": {
    "pipeline@30": {
      "label": "Species",
      "description": "Species for which the SHI is generated",
      "weight": 1
    },
    "pipeline@51": {
      "label": "Country code",
      "description": "Country code for which the SHI is calculated",
      "weight": 2
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|r_habitat_by_tstep": {
      "description": "Raster of habitat by time step.",
      "label": "Habitat by time step",
      "type": "image/tiff;application=geotiff[]",
      "weight": 3
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|img_shs_map": {
      "description": "Figure showing a map with changes in the habitat for the time range.",
      "label": "SHS map",
      "type": "image/png[]",
      "weight": 4
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|img_shs_timeseries": {
      "description": "Figure showing a time series of SHS values for each time step.",
      "label": "SHS time series",
      "type": "image/png[]",
      "weight": 5
    },
    "SHI>scp_SHI_03_HabitatChange_GFW.yml@29|df_shs": {
      "description": "A TSV (Tab Separated Values) file containing Habitat Score, Connectivity Score, and SHI by time step.",
      "label": "SHS table",
      "type": "text/tab-separated-values[]",
      "weight": 6
    },
    "SHI>scp_SHI_04_CalcSHI.yml@46|df_shi": {
      "description": "Table with SHI and Steward's SHI values for the complete area of study.",
      "label": "SHI table",
      "type": "text/tab-separated-values",
      "weight": 7
    },
    "SHI>scp_SHI_04_CalcSHI.yml@46|img_shi_timeseries": {
      "description": "Figure showing a time series of SHI values for each time step.",
      "label": "SHI time series",
      "type": "image/png",
      "weight": 8
    },
    "SHI>scp_SHI_04_CalcSHI.yml@46|img_w_shi_timeseries": {
      "description": "Figure showing a time series of Steward's SHI values for each time step.",
      "label": "Steward's SHI time series",
      "type": "image/png",
      "weight": 9
    }
  },
  "metadata": {
    "name": "Species Habitat Index",
    "description": "This pipeline takes the outputs from the Species Habitat Score (SHS) pipeline and measures the Species Habitat Index for the species used as inputs, following the methodology proposed for Jetz et al. 2022 (https://cdn.mol.org/static/files/indicators/habitat/WCMC-species_habitat_index-15Feb2022.pdf). The index has two componentes an Area Score and a Connectivity score that are measured for the habitat of the required species (Species Habitat Score), and the average between those scores for the study area is the Species Habitat Index. It can also have weight values assigned according to the proportion of the area of the habitat of the species that is located in the study area.",
    "references":[
      {
        "text": "Brooks, T. M., Pimm, S. L., Akçakaya, H. R., Buchanan, G. M., Butchart, S. H. M., Foden, W., Hilton-Taylor, C., Hoffmann, M., Jenkins, C. N., Joppa, L., Li, B. V., Menon, V., Ocampo-Peñuela, N., & Rondinini, C. (2019). Measuring Terrestrial Area of Habitat (AOH) and Its Utility for the IUCN Red List. Trends in Ecology & Evolution, 34(11), 977–986. https://doi.org/10.1016/j.tree.2019.06.009 [https://www.sciencedirect.com/science/article/pii/S0169534719301892?via%3Dihub]"
      },
      {
        "text": "Jetz et al., Species Habitat Index [accessed on 24/8/2022](https://mol.org/indicators/habitat/background)"
      },
      {
        "text": "Jetz, W., McGowan, J., Rinnan, D. S., Possingham, H. P., Visconti, P., O’Donnell, B., & Londoño-Murcia, M. C. (2022). Include biodiversity representation indicators in area-based conservation targets. Nature Ecology & Evolution, 6(2), 123–126. https://doi.org/10.1038/s41559-021-01620-y [https://www.nature.com/articles/s41559-021-01620-y]"
      }
    ],
    "authors": [
      {
        "name": "Maria Isabel Arce-Plata",
        "identifier": "https://orcid.org/0000-0003-4024-9268"
      },
      {
        "name": "Guillaume Larocque",
        "identifier": "https://orcid.org/0000-0002-5967-9156"
      },
      {
        "name": "Jaime Burbano-Girón",
        "identifier": "https://orcid.org/0000-0001-6570-439X"
      },
      {
        "name": "Maria Camila Díaz"
      },
      {
        "name": "Timothée Poisot",
        "identifier": "https://orcid.org/0000-0002-0735-5184"
      }
    ],
    "license": "CC BY",
    "external_link": "https://github.com/GEO-BON/biab-2.0/tree/main/scripts/SHI"
  }
}
