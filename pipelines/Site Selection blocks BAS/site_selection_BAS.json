{
  "nodes": [
    {
      "id": "0",
      "type": "io",
      "position": {
        "x": 821.1289983786924,
        "y": 419.5052943199048
      },
      "data": {
        "descriptionFile": "site_selection_BAS>Block_creation.yml"
      }
    },
    {
      "id": "2",
      "type": "io",
      "position": {
        "x": 709,
        "y": 237.81249999999994
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "6",
      "type": "output",
      "position": {
        "x": 1684,
        "y": 264.8125
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "10",
      "type": "userInput",
      "position": {
        "x": 264,
        "y": 313.8125
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:6622"
      }
    },
    {
      "id": "13",
      "type": "output",
      "position": {
        "x": 1758,
        "y": 466.8125
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "14",
      "type": "output",
      "position": {
        "x": 1768,
        "y": 327.8125
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "18",
      "type": "constant",
      "position": {
        "x": 306,
        "y": 186.8125
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": null
      }
    },
    {
      "id": "26",
      "type": "io",
      "position": {
        "x": 1374.4108632503633,
        "y": 541.6126100633284
      },
      "data": {
        "descriptionFile": "site_selection_BAS>BAS_algorithm.yml"
      }
    },
    {
      "id": "29",
      "type": "output",
      "position": {
        "x": 1987.2631605816787,
        "y": 612.7352085814957
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "31",
      "type": "output",
      "position": {
        "x": 1953,
        "y": 512
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "32",
      "type": "output",
      "position": {
        "x": 1922,
        "y": 689
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "33",
      "type": "io",
      "position": {
        "x": 260.4024604461355,
        "y": 484.1968205133986
      },
      "data": {
        "descriptionFile": "data>getBoundingBox.yml"
      }
    },
    {
      "id": "34",
      "type": "constant",
      "position": {
        "x": -92.23655537541032,
        "y": 499.54550246117526
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": null
      }
    },
    {
      "id": "35",
      "type": "constant",
      "position": {
        "x": -110.70966612623079,
        "y": 553.6453268028639
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": null
      }
    },
    {
      "id": "36",
      "type": "userInput",
      "position": {
        "x": -50.01230223067785,
        "y": 437.52863065484934
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "Colombia"
      }
    }
  ],
  "edges": [
    {
      "source": "2",
      "sourceHandle": "rasters",
      "target": "0",
      "targetHandle": "rasters",
      "id": "reactflow__edge-2rasters-0rasters"
    },
    {
      "source": "0",
      "sourceHandle": "rast_blocks",
      "target": "6",
      "targetHandle": null,
      "id": "reactflow__edge-0rast_blocks-6"
    },
    {
      "source": "10",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "proj",
      "id": "reactflow__edge-10-2proj"
    },
    {
      "source": "0",
      "sourceHandle": "pca_summary_df",
      "target": "13",
      "targetHandle": null,
      "id": "reactflow__edge-0pca_summary_df-13"
    },
    {
      "source": "0",
      "sourceHandle": "blocks_plot",
      "target": "14",
      "targetHandle": null,
      "id": "reactflow__edge-0blocks_plot-14"
    },
    {
      "source": "18",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "weight_matrix_with_ids",
      "id": "reactflow__edge-18-2weight_matrix_with_ids"
    },
    {
      "source": "26",
      "sourceHandle": "pts_df",
      "target": "29",
      "targetHandle": null,
      "id": "reactflow__edge-26pts_df-29"
    },
    {
      "source": "0",
      "sourceHandle": "rast_blocks",
      "target": "26",
      "targetHandle": "rast_blocks",
      "id": "reactflow__edge-0rast_blocks-26rast_blocks"
    },
    {
      "source": "26",
      "sourceHandle": "maps_output",
      "target": "31",
      "targetHandle": null,
      "id": "reactflow__edge-26maps_output-31"
    },
    {
      "source": "26",
      "sourceHandle": "points_shape",
      "target": "32",
      "targetHandle": null,
      "id": "reactflow__edge-26points_shape-32"
    },
    {
      "source": "33",
      "sourceHandle": "study_area_polygon",
      "target": "26",
      "targetHandle": "country_polygon",
      "id": "reactflow__edge-33study_area_polygon-26country_polygon"
    },
    {
      "source": "33",
      "sourceHandle": "study_area_polygon",
      "target": "0",
      "targetHandle": "country_polygon",
      "id": "reactflow__edge-33study_area_polygon-0country_polygon"
    },
    {
      "source": "34",
      "sourceHandle": null,
      "target": "33",
      "targetHandle": "state",
      "id": "reactflow__edge-34-33state"
    },
    {
      "source": "35",
      "sourceHandle": null,
      "target": "33",
      "targetHandle": "study_area_file",
      "id": "reactflow__edge-35-33study_area_file"
    },
    {
      "source": "36",
      "sourceHandle": null,
      "target": "33",
      "targetHandle": "country",
      "id": "reactflow__edge-36-33country"
    }
  ],
  "inputs": {
    "data>loadFromStac.yml@2|stac_url": {
      "description": "URL of the STAC catalog.",
      "label": "stac_url",
      "type": "text",
      "example": "https://stac.geobon.org/",
      "weight": 0
    },
    "data>loadFromStac.yml@2|collections_items": {
      "description": "Vector of strings, collection name followed by '|' followed by item id",
      "label": "collections_items",
      "type": "text[]",
      "example": [
        "chelsa-clim|bio1",
        "chelsa-clim|bio2"
      ],
      "weight": 1
    },
    "data>loadFromStac.yml@2|spatial_res": {
      "description": "Integer, spatial resolution of the rasters",
      "label": "spatial resolution",
      "type": "float",
      "example": 1000,
      "weight": 2
    },
    "data>loadFromStac.yml@2|resampling": {
      "description": "Resampling method used when rescaling the raster layers. See [gdalwarp](https://gdal.org/en/latest/programs/gdalwarp.html) for description.",
      "label": "resampling",
      "type": "options",
      "options": [
        "near",
        "bilinear",
        "average",
        "mode",
        "cubic",
        "cubicspline",
        "lanczos",
        "rms",
        "min",
        "max",
        "sum",
        "med",
        "q1",
        "q3"
      ],
      "example": "near",
      "weight": 3
    },
    "data>loadFromStac.yml@2|mask": {
      "description": "Shapefile, used to mask the output rasters",
      "label": "mask",
      "type": "application/dbf",
      "weight": 4,
      "example": null
    },
    "data>loadFromStac.yml@2|aggregation": {
      "description": "Method used to aggregate items that overlay each other",
      "label": "aggregation",
      "type": "options",
      "options": [
        "first",
        "min",
        "max",
        "mean",
        "median"
      ],
      "example": "first",
      "weight": 5
    },
    "pipeline@10": {
      "label": "projection system",
      "description": "String, projection of the rasters",
      "type": "text",
      "example": "EPSG:6622",
      "weight": 6
    },
    "site_selection_BAS>Block_creation.yml@0|n_rows": {
      "description": "Number of rows for the block grid",
      "label": "number of rows",
      "type": "int",
      "example": 10,
      "weight": 7
    },
    "site_selection_BAS>Block_creation.yml@0|n_cols": {
      "description": "Number of columns for the block grid",
      "label": "number of columns",
      "type": "int",
      "example": 10,
      "weight": 8
    },
    "site_selection_BAS>BAS_algorithm.yml@26|ndesign": {
      "description": "A number of target sites to obtain",
      "label": "Target total sites",
      "type": "int",
      "example": 100,
      "weight": 9
    },
    "pipeline@36": {
      "label": "Country",
      "description": "Country of interest. For list of countries look here https://geoio.biodiversite-quebec.ca/docs#/default/validate_country_name_validate_country_name_get.",
      "type": "text",
      "example": "Colombia",
      "weight": 10
    },
    "data>loadFromStac.yml@2|bbox": {
      "description": "Vector of float, bbox coordinates of the extent in the order xmin, ymin, xmax, ymax",
      "label": "bbox",
      "type": "float[]",
      "example": [
        -2316297,
        -1971146,
        1015207,
        1511916
      ],
      "weight": 11
    }
  },
  "outputs": {
    "site_selection_BAS>Block_creation.yml@0|rast_blocks": {
      "description": "environmental blocks raster",
      "label": "environmental blocks raster",
      "type": "image/tiff;application=geotiff[]",
      "weight": 0
    },
    "site_selection_BAS>Block_creation.yml@0|pca_summary_df": {
      "description": "summary of PCA",
      "label": "summary of PCA",
      "type": "csv",
      "weight": 1
    },
    "site_selection_BAS>Block_creation.yml@0|blocks_plot": {
      "description": "env space and map of blocks",
      "label": "blocks and map plots",
      "type": "image/png",
      "weight": 2
    },
    "site_selection_BAS>BAS_algorithm.yml@26|pts_df": {
      "description": "dataframe of selected points",
      "label": "selected points",
      "type": "csv",
      "weight": 3
    },
    "site_selection_BAS>BAS_algorithm.yml@26|maps_output": {
      "description": "maps of selected points",
      "label": "maps_output",
      "type": "image/png",
      "weight": 4
    },
    "site_selection_BAS>BAS_algorithm.yml@26|points_shape": {
      "description": "Vector shapefile of selected points",
      "label": "selected points shapefile",
      "type": "application/geo+json",
      "weight": 5
    }
  },
  "metadata": {
    "name": "Environmental Sampling Site Selection",
    "description": "Selection of sampling sites based on environmental variables using a BAS algorithm",
    "author": [
      {
        "name": "Francis van Oordt",
        "email": "francis.vanoordtlahoz@mail.mcgill.ca",
        "identifier": "https://orcid.org/0000-0002-8471-235X"
      }
    ],
    "license": "CC-BY",
    "references": [
      {
        "text": "spbal: Spatially Balanced Sampling Algorithms",
        "doi": "https://doi.org/\t10.32614/CRAN.package.spbal"
      },
      {
        "text": "Survey-gap analysis in expeditionary research: where do we go from here?",
        "doi": "https://doi.org/10.1111/j.1095-8312.2005.00520.x"
      },
      {
        "text": {
          "Selection of sampling sites for biodiversity inventory": "Effects of environmental and geographical considerations"
        },
        "doi": "https://doi.org/10.1111/2041-210X.13869"
      }
    ]
  }
}