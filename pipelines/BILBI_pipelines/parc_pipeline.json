{
  "nodes": [
    {
      "id": "0",
      "type": "io",
      "position": {
        "x": 1597,
        "y": 182.5
      },
      "data": {
        "descriptionFile": "bilbi_indicators>bilbi_weighted_mean.yml"
      }
    },
    {
      "id": "1",
      "type": "io",
      "position": {
        "x": 1144,
        "y": 40.5
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "2",
      "type": "io",
      "position": {
        "x": 1144,
        "y": 259.5
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "3",
      "type": "constant",
      "position": {
        "x": 641,
        "y": 56.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "4",
      "type": "constant",
      "position": {
        "x": 641,
        "y": 196.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "6",
      "type": "output",
      "position": {
        "x": 2186,
        "y": 40.5
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "7",
      "type": "output",
      "position": {
        "x": 2186,
        "y": 237
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "8",
      "type": "constant",
      "position": {
        "x": 631,
        "y": 98.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "csiro_parc"
        ]
      }
    },
    {
      "id": "9",
      "type": "constant",
      "position": {
        "x": 631,
        "y": 273.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "csiro_denominator"
        ]
      }
    },
    {
      "id": "13",
      "type": "output",
      "position": {
        "x": 1597,
        "y": 12
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "15",
      "type": "constant",
      "position": {
        "x": 641,
        "y": 350.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": null
      }
    },
    {
      "id": "16",
      "type": "constant",
      "position": {
        "x": 641,
        "y": 392.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "17",
      "type": "constant",
      "position": {
        "x": 641,
        "y": 434.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "18",
      "type": "userInput",
      "position": {
        "x": 667,
        "y": 238.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "near",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    },
    {
      "id": "19",
      "type": "userInput",
      "position": {
        "x": 637,
        "y": 150.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 1000
      }
    },
    {
      "id": "20",
      "type": "userInput",
      "position": {
        "x": 662,
        "y": 315.5
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "23",
      "type": "userInput",
      "position": {
        "x": 12,
        "y": 39.25
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "bboxCRS"
      }
    },
    {
      "id": "24",
      "type": "output",
      "position": {
        "x": 1028.7353991427563,
        "y": 476.7438787363183
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "io",
      "position": {
        "x": 525.5185571826676,
        "y": 481.8260063799862
      },
      "data": {
        "descriptionFile": "data>load_polygons.yml"
      }
    },
    {
      "id": "26",
      "type": "constant",
      "position": {
        "x": 124.05774866252466,
        "y": 491.8966566846712
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "Country or region",
        "options": [
          "Country or region",
          "WDPA",
          "EEZ"
        ]
      }
    },
    {
      "id": "27",
      "type": "constant",
      "position": {
        "x": 137.2528277702536,
        "y": 630.4449873158251
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": null
      }
    }
  ],
  "edges": [
    {
      "source": "3",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-3-1stac_url"
    },
    {
      "source": "4",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-4-2stac_url"
    },
    {
      "source": "2",
      "sourceHandle": "rasters",
      "target": "0",
      "targetHandle": "bilbi_denominator",
      "id": "reactflow__edge-2rasters-0bilbi_denominator"
    },
    {
      "source": "1",
      "sourceHandle": "rasters",
      "target": "0",
      "targetHandle": "bilbi_indicator",
      "id": "reactflow__edge-1rasters-0bilbi_indicator"
    },
    {
      "source": "0",
      "sourceHandle": "summarised_values",
      "target": "6",
      "targetHandle": null,
      "id": "reactflow__edge-0summarised_values-6"
    },
    {
      "source": "0",
      "sourceHandle": "time_series_plot",
      "target": "7",
      "targetHandle": null,
      "id": "reactflow__edge-0time_series_plot-7"
    },
    {
      "source": "8",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-8-1collections_items"
    },
    {
      "source": "9",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-9-2collections_items"
    },
    {
      "source": "1",
      "sourceHandle": "rasters",
      "target": "13",
      "targetHandle": null,
      "id": "reactflow__edge-1rasters-13"
    },
    {
      "source": "15",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "t0",
      "id": "reactflow__edge-15-2t0"
    },
    {
      "source": "16",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "t1",
      "id": "reactflow__edge-16-2t1"
    },
    {
      "source": "17",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "temporal_res",
      "id": "reactflow__edge-17-2temporal_res"
    },
    {
      "source": "18",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "resampling",
      "id": "reactflow__edge-18-1resampling"
    },
    {
      "source": "18",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "resampling",
      "id": "reactflow__edge-18-2resampling"
    },
    {
      "source": "19",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-19-2spatial_res"
    },
    {
      "source": "19",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-19-1spatial_res"
    },
    {
      "source": "20",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-20-2aggregation"
    },
    {
      "source": "20",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-20-1aggregation"
    },
    {
      "source": "23",
      "sourceHandle": null,
      "target": "2",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-23-2bbox_crs"
    },
    {
      "source": "23",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "bbox_crs",
      "id": "reactflow__edge-23-1bbox_crs"
    },
    {
      "source": "23",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "country_region_bbox",
      "id": "reactflow__edge-23-25country_region_bbox"
    },
    {
      "source": "26",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "polygon_type",
      "id": "reactflow__edge-26-25polygon_type"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": "buffer",
      "id": "reactflow__edge-27-25buffer"
    },
    {
      "source": "25",
      "sourceHandle": "polygon",
      "target": "24",
      "targetHandle": null,
      "id": "reactflow__edge-25polygon-24"
    },
    {
      "source": "25",
      "sourceHandle": "polygon",
      "target": "2",
      "targetHandle": "study_area",
      "id": "reactflow__edge-25polygon-2study_area"
    },
    {
      "source": "25",
      "sourceHandle": "polygon",
      "target": "1",
      "targetHandle": "study_area",
      "id": "reactflow__edge-25polygon-1study_area"
    },
    {
      "source": "25",
      "sourceHandle": "polygon",
      "target": "0",
      "targetHandle": "study_area",
      "id": "reactflow__edge-25polygon-0study_area"
    }
  ],
  "inputs": {
    "pipeline@23": {
      "label": "Bounding box and CRS",
      "description": "Select a country/region and a CRS to obtain the associated bounding box. You may also draw/input a custom bounding box along with a CRS.",
      "type": "bboxCRS",
      "example": null,
      "weight": 0
    },
    "data>loadFromStac.yml@1|t0": {
      "description": "Start date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank if using all available dates.",
      "label": "Start date (optional)",
      "type": "text",
      "example": null,
      "weight": 1
    },
    "data>loadFromStac.yml@1|t1": {
      "description": "End date for time series layers. Can be in the format YYYY or YYYY-MM-DD. Leave blank if using all available dates.",
      "label": "End date (optional)",
      "type": "text",
      "example": null,
      "weight": 2
    },
    "data>loadFromStac.yml@1|temporal_res": {
      "description": "Temporal resolution to use when querying STAC items by date, in the format (\"P\", time interval, and time unit, e.g. \"P1Y\" is yearly, \"P1M\" is monthly, and \"P1D\" is daily). Leave blank if not querying by date. If the temporal resolution is coarser than the temporal resolution of the time series, the layers will be aggregated with the aggregation method chosen below.",
      "label": "Temporal resolution (optional)",
      "type": "text",
      "example": null,
      "weight": 3
    },
    "pipeline@19": {
      "label": "Spatial resolution",
      "description": "Integer, spatial resolution of the rasters in the same units as the coordinate reference system (meters for projected reference systems and degrees for reference systems in lat long).\n\nLeave blank to use the original spatial resolution of the layers. If left blank, CRS must be EPSG:4326.",
      "type": "float",
      "example": null,
      "weight": 4
    },
    "pipeline@18": {
      "label": "Resampling method",
      "description": "Resampling method used when rescaling and/or reprojecting the raster layers. See [gdalwarp](https://gdal.org/en/latest/programs/gdalwarp.html) for description.\n\nWill be ignored if not resampling.",
      "type": "options",
      "example": "near",
      "options": [
        "near",
        "bilinear",
        "average",
        "mode",
        "cubic",
        "cubicspline",
        "lanczos",
        "rms",
        "min",
        "max",
        "sum",
        "med",
        "q1",
        "q3"
      ],
      "weight": 5
    },
    "pipeline@20": {
      "label": "Aggregation method",
      "description": "Method used to aggregate items when layers combining over time.\n\nWill be ignored if not aggregating.",
      "type": "options",
      "example": "first",
      "options": [
        "first",
        "min",
        "max",
        "mean",
        "median"
      ],
      "weight": 6
    }
  },
  "outputs": {
    "data>loadFromStac.yml@1|rasters": {
      "description": "Output raster files in geotiff format.",
      "label": "Rasters of indicator layers for each year",
      "type": "image/tiff;application=geotiff[]",
      "weight": 0
    },
    "bilbi_indicators>bilbi_weighted_mean.yml@0|summarised_values": {
      "description": "Yearly weighted geometric mean of PARC in the study area polygon.\n\nA high score indicates that a higher percentage of the region's biodiversity and environmental variation is represented in protected areas. A low score suggests that some ecological types are underrepresented.",
      "label": "PARC summary",
      "type": "text/csv",
      "weight": 1
    },
    "bilbi_indicators>bilbi_weighted_mean.yml@0|time_series_plot": {
      "description": "Plot of the geometric mean of the indicator over time in the study area of interest",
      "label": "Time series plot",
      "type": "image/png",
      "weight": 2
    },
    "data>load_polygons.yml@25|polygon": {
      "description": "Polygons of the country, WDPA, EEZs for the country or region of interest",
      "label": "Polygon",
      "type": "application/geopackage+sqlite3",
      "weight": 3
    }
  },
  "metadata": {
    "name": "Protected Area Representativeness and Connectedness (PARC)",
    "description": "\n## Introduction\nThe Protected Area Representativeness and Connectedness (PARC) indices measure the extent to which terrestrial protected areas, and other effective area-based conservation measures (OECMs), are ecologically representative, and well-connected (both to one another, and to other areas of intact natural ecosystems in the surrounding landscape).\n\nThis pipeline calculates a weighted geometric mean of the PARC indicator over a region of interest.  The code to calculate the weighted mean was adapted from the \"Calculating weighted geometric means of  CSIRO BILBI indicator\" script on the  [CSIRO data access portal](https://doi.org/10.25919/edwj-4b67)\n## Uses\nThe PARC indices, whether generated separately or as a composite, are used to monitor and report past-to-present trends in representativeness and connectedness by repeated calculation using best-available mapping of protected areas and OECMs at multiple points in time, e.g. for different years. They can also provide a foundation for assessing the contribution that potential additions to the system of protected areas and OECMs might make to improving present PARC scores, thereby providing a foundation for prioritising such actions.\n### Pipeline limitations\n- PARC is a modeled layer, therefore there are greater uncertainties in areas with less data. Interpret the results with caution.",
    "author": [
      {
        "name": "Jory Griffith",
        "email": "jory.griffith@mcgill.ca",
        "identifier": "https://orcid.org/0000-0001-6020-6690"
      }
    ],
    "license": "CC-BY-NC",
    "references": [
      {
        "text": "Harwood et al. 2022",
        "doi": "https://doi.org/10.25919/edwj-4b67"
      }
    ]
  }
}