{
  "nodes": [
    {
      "id": "1",
      "type": "io",
      "position": {
        "x": 1087,
        "y": 52
      },
      "data": {
        "descriptionFile": "data>helperForCatalogue.yml"
      }
    },
    {
      "id": "3",
      "type": "io",
      "position": {
        "x": 1720.080499446689,
        "y": -10.852942942888376
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "4",
      "type": "constant",
      "position": {
        "x": 1212,
        "y": 182
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "https://stac.geobon.org/"
      }
    },
    {
      "id": "8",
      "type": "userInput",
      "position": {
        "x": 18.916409040608073,
        "y": 342.6408740317056
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text",
        "value": "EPSG:4326"
      }
    },
    {
      "id": "9",
      "type": "io",
      "position": {
        "x": 2825,
        "y": 12
      },
      "data": {
        "descriptionFile": "SHI>habitatChange_ESA.yml"
      }
    },
    {
      "id": "11",
      "type": "io",
      "position": {
        "x": 2251,
        "y": 151
      },
      "data": {
        "descriptionFile": "data>getAreaOfHabitat.yml"
      }
    },
    {
      "id": "12",
      "type": "io",
      "position": {
        "x": 443,
        "y": 182
      },
      "data": {
        "descriptionFile": "data>getCountryPolygon.yml"
      }
    },
    {
      "id": "13",
      "type": "io",
      "position": {
        "x": 1085,
        "y": 266
      },
      "data": {
        "descriptionFile": "data>getBoundingBox.yml"
      }
    },
    {
      "id": "14",
      "type": "io",
      "position": {
        "x": 1635,
        "y": 358.3333333333333
      },
      "data": {
        "descriptionFile": "data>getRangeMap.yml"
      }
    },
    {
      "id": "15",
      "type": "userInput",
      "position": {
        "x": 1364,
        "y": 339
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "Myrmecophaga tridactyla"
        ]
      }
    },
    {
      "id": "16",
      "type": "io",
      "position": {
        "x": 1644,
        "y": 451.3333333333333
      },
      "data": {
        "descriptionFile": "data>loadFromStac.yml"
      }
    },
    {
      "id": "17",
      "type": "constant",
      "position": {
        "x": 1202,
        "y": 481.3333333333333
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text[]",
        "value": [
          "earthenv_topography|elevation_min",
          "earthenv_topography|elevation_max"
        ]
      }
    },
    {
      "id": "19",
      "type": "output",
      "position": {
        "x": 3418.62564292562,
        "y": -11.360140259987077
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "23",
      "type": "userInput",
      "position": {
        "x": 2513.04345703125,
        "y": 26.478256225585938
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int[]",
        "value": []
      }
    },
    {
      "id": "24",
      "type": "output",
      "position": {
        "x": 3417.876275112467,
        "y": 33.64852965707274
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "25",
      "type": "output",
      "position": {
        "x": 1712.677773557039,
        "y": 241.7867097598567
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "26",
      "type": "output",
      "position": {
        "x": 2248.04345703125,
        "y": 416.47825622558594
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "27",
      "type": "userInput",
      "position": {
        "x": 1224.4045144954143,
        "y": 714.5171284633615
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "application/geopackage+sqlite3",
        "value": null
      }
    },
    {
      "id": "28",
      "type": "userInput",
      "position": {
        "x": 1233.4420853860304,
        "y": -48.02791543240998
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "text"
      }
    },
    {
      "id": "29",
      "type": "userInput",
      "position": {
        "x": 803.5517766001251,
        "y": -349.1304697969794
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 2010
      }
    },
    {
      "id": "30",
      "type": "userInput",
      "position": {
        "x": 646.2051104111492,
        "y": -197.3372153558497
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "int",
        "value": 2011
      }
    },
    {
      "id": "31",
      "type": "output",
      "position": {
        "x": 3420.2173461914062,
        "y": 73.39129638671875
      },
      "data": {
        "label": "Output"
      }
    },
    {
      "id": "33",
      "type": "userInput",
      "position": {
        "x": 1127.2608337402344,
        "y": 377.39129638671875
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "first",
        "options": [
          "first",
          "min",
          "max",
          "mean",
          "median"
        ]
      }
    },
    {
      "id": "35",
      "type": "userInput",
      "position": {
        "x": 1161.2608337402344,
        "y": 635.3912963867188
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "float",
        "value": 1000
      }
    },
    {
      "id": "36",
      "type": "userInput",
      "position": {
        "x": 1147.2608337402344,
        "y": 675.3912963867188
      },
      "dragHandle": ".dragHandle",
      "data": {
        "type": "options",
        "value": "near",
        "options": [
          "near",
          "bilinear",
          "average",
          "mode",
          "cubic",
          "cubicspline",
          "lanczos",
          "rms",
          "min",
          "max",
          "sum",
          "med",
          "q1",
          "q3"
        ]
      }
    }
  ],
  "edges": [
    {
      "source": "1",
      "sourceHandle": "collections",
      "target": "3",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-1collections-3collections_items"
    },
    {
      "source": "4",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-4-3stac_url"
    },
    {
      "source": "8",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "crs",
      "id": "reactflow__edge-8-3crs"
    },
    {
      "source": "3",
      "sourceHandle": "rasters",
      "target": "9",
      "targetHandle": "layers",
      "id": "reactflow__edge-3rasters-9layers"
    },
    {
      "source": "11",
      "sourceHandle": "r_area_of_habitat",
      "target": "9",
      "targetHandle": "aoh",
      "id": "reactflow__edge-11r_area_of_habitat-9aoh"
    },
    {
      "source": "8",
      "sourceHandle": null,
      "target": "13",
      "targetHandle": "crs",
      "id": "reactflow__edge-8-13crs"
    },
    {
      "source": "8",
      "sourceHandle": null,
      "target": "12",
      "targetHandle": "crs",
      "id": "reactflow__edge-8-12crs"
    },
    {
      "source": "12",
      "sourceHandle": "country_region_polygon",
      "target": "13",
      "targetHandle": "study_area_file",
      "id": "reactflow__edge-12country_region_polygon-13study_area_file"
    },
    {
      "source": "13",
      "sourceHandle": "bbox",
      "target": "3",
      "targetHandle": "bbox",
      "id": "reactflow__edge-13bbox-3bbox"
    },
    {
      "source": "12",
      "sourceHandle": "country_region_polygon",
      "target": "11",
      "targetHandle": "country_region_polygon",
      "id": "reactflow__edge-12country_region_polygon-11country_region_polygon"
    },
    {
      "source": "15",
      "sourceHandle": null,
      "target": "14",
      "targetHandle": "species",
      "id": "reactflow__edge-15-14species"
    },
    {
      "source": "15",
      "sourceHandle": null,
      "target": "11",
      "targetHandle": "species",
      "id": "reactflow__edge-15-11species"
    },
    {
      "source": "8",
      "sourceHandle": null,
      "target": "11",
      "targetHandle": "srs",
      "id": "reactflow__edge-8-11srs"
    },
    {
      "source": "14",
      "sourceHandle": "sf_range_map",
      "target": "11",
      "targetHandle": "sf_range_map",
      "id": "reactflow__edge-14sf_range_map-11sf_range_map"
    },
    {
      "source": "4",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "stac_url",
      "id": "reactflow__edge-4-16stac_url"
    },
    {
      "source": "13",
      "sourceHandle": "bbox",
      "target": "16",
      "targetHandle": "bbox",
      "id": "reactflow__edge-13bbox-16bbox"
    },
    {
      "source": "16",
      "sourceHandle": "rasters",
      "target": "11",
      "targetHandle": "rasters",
      "id": "reactflow__edge-16rasters-11rasters"
    },
    {
      "source": "17",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "collections_items",
      "id": "reactflow__edge-17-16collections_items"
    },
    {
      "source": "8",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "crs",
      "id": "reactflow__edge-8-16crs"
    },
    {
      "source": "9",
      "sourceHandle": "raster",
      "target": "19",
      "targetHandle": null,
      "id": "reactflow__edge-9raster-19"
    },
    {
      "source": "23",
      "sourceHandle": null,
      "target": "9",
      "targetHandle": "habitats",
      "id": "reactflow__edge-23-9habitats"
    },
    {
      "source": "9",
      "sourceHandle": "habitat_change_map",
      "target": "24",
      "targetHandle": null,
      "id": "reactflow__edge-9habitat_change_map-24"
    },
    {
      "source": "15",
      "sourceHandle": null,
      "target": "25",
      "targetHandle": null,
      "id": "reactflow__edge-15-25"
    },
    {
      "source": "14",
      "sourceHandle": "sf_range_map",
      "target": "26",
      "targetHandle": null,
      "id": "reactflow__edge-14sf_range_map-26"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "study_area",
      "id": "reactflow__edge-27-16study_area"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "study_area",
      "id": "reactflow__edge-27-3study_area"
    },
    {
      "source": "27",
      "sourceHandle": null,
      "target": "11",
      "targetHandle": "study_area",
      "id": "reactflow__edge-27-11study_area"
    },
    {
      "source": "28",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "weight_matrix_with_ids",
      "id": "reactflow__edge-28-3weight_matrix_with_ids"
    },
    {
      "source": "28",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "weight_matrix_with_ids",
      "id": "reactflow__edge-28-16weight_matrix_with_ids"
    },
    {
      "source": "29",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "start_year",
      "id": "reactflow__edge-29-1start_year"
    },
    {
      "source": "30",
      "sourceHandle": null,
      "target": "1",
      "targetHandle": "end_year",
      "id": "reactflow__edge-30-1end_year"
    },
    {
      "source": "29",
      "sourceHandle": null,
      "target": "9",
      "targetHandle": "start_year",
      "id": "reactflow__edge-29-9start_year"
    },
    {
      "source": "30",
      "sourceHandle": null,
      "target": "9",
      "targetHandle": "end_year",
      "id": "reactflow__edge-30-9end_year"
    },
    {
      "source": "9",
      "sourceHandle": "shs_table",
      "target": "31",
      "targetHandle": null,
      "id": "reactflow__edge-9shs_table-31"
    },
    {
      "source": "33",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-33-16aggregation"
    },
    {
      "source": "33",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "aggregation",
      "id": "reactflow__edge-33-3aggregation"
    },
    {
      "source": "35",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-35-16spatial_res"
    },
    {
      "source": "35",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "spatial_res",
      "id": "reactflow__edge-35-3spatial_res"
    },
    {
      "source": "36",
      "sourceHandle": null,
      "target": "16",
      "targetHandle": "resampling",
      "id": "reactflow__edge-36-16resampling"
    },
    {
      "source": "36",
      "sourceHandle": null,
      "target": "3",
      "targetHandle": "resampling",
      "id": "reactflow__edge-36-3resampling"
    }
  ],
  "inputs": {
    "pipeline@15": {
      "label": "Species",
      "description": "Scientific name of the species. Multiple species names can be specified, separated with a comma.",
      "type": "text[]",
      "example": [
        "Alces alces",
        "Ambystoma laterale"
      ],
      "weight": 0
    },
    "data>getCountryPolygon.yml@12|country": {
      "description": "ISO3 country code for the country of interest. For a list of ISO3 country codes,\nlook [here](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes).\n",
      "label": "ISO3 country code",
      "type": "text",
      "example": "CAN",
      "weight": 1
    },
    "data>getCountryPolygon.yml@12|region": {
      "description": "ISO 3166-2 code for province or region, see more [here](en.wikipedia.org/wiki/ISO_3166-2)",
      "label": "State/Province code",
      "type": "text",
      "example": null,
      "weight": 2
    },
    "pipeline@8": {
      "label": "Coordinate reference system",
      "description": "Numerical value referring to the EPSG code (European Petroleum Survey Group) associated with the spatial reference system that will be used as a reference for the study area.\nThis numerical value specifies the projection and geodetic datum used to define the coordinates and spatial representation of the data in the study area.\nThis MUST be in a projected reference system (not lat long).\n\nFor further information on coordinate systems and EPSG codes, you can access the official database on the EPSG website at [https://epsg.org/home.html](https://epsg.org/home.html).\nThe website provides documentation, resources, and tools for searching and understanding the EPSG codes used in various geospatial contexts.\n",
      "type": "text",
      "example": "EPSG:3348",
      "weight": 3
    },
    "pipeline@27": {
      "label": "Study area",
      "description": "Polygon of study area used to crop output layers. *Specifying a custom study area will override the bounding box input.*",
      "type": "application/geopackage+sqlite3",
      "example": null,
      "weight": 4
    },
    "data>getAreaOfHabitat.yml@11|buff_size": {
      "description": "Size of the buffer around the study area. If it is not defined it will be estimated as half of the total width of the study area.",
      "label": "Buffer for study area",
      "type": "int",
      "example": 0,
      "weight": 5
    },
    "pipeline@29": {
      "label": "Start year",
      "description": "Year of the first STAC Catalogue item wanted",
      "type": "int",
      "example": 1992,
      "weight": 6
    },
    "pipeline@30": {
      "label": "End year",
      "description": "Year of the second STAC Catalogue item wanted",
      "type": "int",
      "example": 2020,
      "weight": 7
    },
    "pipeline@23": {
      "label": "Habitats",
      "description": "Codes for the habitat types of the species of interest. For habitat types and their associated codes, refer to the [list of global CCI-LC codes](http://maps.elie.ucl.ac.be/CCI/viewer/download/CCI-LC_Maps_Legend.pdf).",
      "type": "int[]",
      "example": [
        "50",
        "60",
        "61",
        "62",
        "70",
        "71",
        "72",
        "80",
        "81",
        "82",
        "90",
        "151",
        "160",
        "170"
      ],
      "weight": 8
    },
    "data>getAreaOfHabitat.yml@11|spat_res": {
      "description": "Spatial resolution (in meters) for the output of the analysis.",
      "label": "Output spatial resolution",
      "type": "int",
      "example": 1000,
      "weight": 9
    },
    "data>getAreaOfHabitat.yml@11|range_map_type": {
      "description": "Select type of range map according to the type of the source file: 1) polygon, 2) raster, 3) an intersection between the raster and polygon files.",
      "label": "Type of range map",
      "type": "options",
      "options": [
        "Polygon",
        "Raster",
        "Both"
      ],
      "example": "Polygon",
      "weight": 10
    },
    "data>getAreaOfHabitat.yml@11|r_range_map": {
      "description": "Binary raster with expected area for the species or raster with values equal to 1 where the species is distributed and the rest is empty.",
      "label": "Range map (raster)",
      "type": "image/tiff;application=geotiff[]",
      "example": [],
      "weight": 11
    },
    "data>getAreaOfHabitat.yml@11|elevation_filter": {
      "description": "If 'yes' an elevation filter using IUCN information is applied, if 'no' the range map is taken as the area of habitat.",
      "label": "Filter by elevation",
      "type": "options",
      "options": [
        "Yes",
        "No"
      ],
      "example": "Yes",
      "weight": 12
    },
    "data>getAreaOfHabitat.yml@11|elev_buffer": {
      "description": "Elevation buffer in meters to add (or substract) to the reported species elevation range. Default is zero. Positive values will increase the range in that value in meters and negative values will reduce the range in that value.",
      "label": "Elevation buffer",
      "type": "int",
      "example": null,
      "weight": 13
    },
    "data>getRangeMap.yml@14|expert_source": {
      "description": "Source of the expert range map for the species. The options are:\nMap of Life (MOL), International union for conservation of nature (IUCN) and range maps from the Ministère de l’Environnement du Québec (QC).\n",
      "label": "Source of expert range map",
      "type": "options",
      "options": [
        "MOL",
        "IUCN",
        "QC"
      ],
      "example": "IUCN",
      "weight": 14
    },
    "pipeline@28": {
      "label": "Weight matrix with ids",
      "description": "Weight matrix used for BON optimization. Vector of strings, collection name followed by '|' followed by item id, followed by weights. If using the GEO BON Stac catalog, see the list of [available layers here](https://stac.geobon.org/viewer). The collection and item ids can be obtained as the last two parts of the url for each layer (chelsa-clim/bio1). Cannot be used if collection_items is set.",
      "type": "text",
      "example": null,
      "weight": 15
    },
    "pipeline@33": {
      "label": "Aggregation method",
      "description": "Method used to aggregate items that overlay each other",
      "type": "options",
      "example": "first",
      "options": [
        "first",
        "min",
        "max",
        "mean",
        "median"
      ],
      "weight": 16
    },
    "pipeline@35": {
      "label": "Spatial resolution",
      "description": "Integer, spatial resolution of the rasters in meters",
      "type": "float",
      "example": 1000,
      "weight": 17
    },
    "pipeline@36": {
      "label": "Resampling method",
      "description": "Resampling method used when rescaling the raster layers. See [gdalwarp](https://gdal.org/en/latest/programs/gdalwarp.html) for description.",
      "type": "options",
      "example": "near",
      "options": [
        "near",
        "bilinear",
        "average",
        "mode",
        "cubic",
        "cubicspline",
        "lanczos",
        "rms",
        "min",
        "max",
        "sum",
        "med",
        "q1",
        "q3"
      ],
      "weight": 18
    }
  },
  "outputs": {
    "SHI>habitatChange_ESA.yml@9|raster": {
      "description": "Map showing habitat change over the range of time specified",
      "label": "Raster",
      "type": "image/tiff;application=geotiff",
      "weight": 0
    },
    "SHI>habitatChange_ESA.yml@9|habitat_change_map": {
      "description": "Map showing habitat change over the range of time specified",
      "label": "Habitat change map",
      "type": "image/tiff;application=geotiff",
      "weight": 1
    },
    "pipeline@15|default_output": {
      "label": "species",
      "description": "Scientific name of the species. Multiple species names can be specified, separated with a comma.",
      "example": [
        "Myrmecophaga tridactyla"
      ],
      "type": "text[]",
      "weight": 2
    },
    "data>getRangeMap.yml@14|sf_range_map": {
      "description": "Polygon with expected area for the species.",
      "label": "expert range map",
      "type": "application/geopackage+sqlite3[]",
      "weight": 3
    },
    "SHI>habitatChange_ESA.yml@9|shs_table": {
      "description": "Table of SHS values",
      "label": "SHS Table",
      "type": "text/tab-separated-values",
      "weight": 4
    }
  },
  "metadata": {
    "name": "SHI with ESA",
    "description": "This pipelines calculates the Species Habitat Index (SHI) using the European Space Agency (ESA) landcover data.",
    "author": [
      {
        "name": "Laetitia Tremblay",
        "email": "laetitia.tremblay@mcgill.ca",
        "identifier": "https://www.linkedin.com/in/laetitia-tremblay-b0619b273/",
        "role": "Pipeline development"
      }
    ]
  }
}